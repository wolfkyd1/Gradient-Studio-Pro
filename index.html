<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Gradient Studio Pro | Professional Design Tool</title>
    
    <!-- External Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/3.3.0/tailwind.min.js"></script>
    
    <style>
        /* ============================================
           CORE STYLES & VARIABLES
           ============================================ */
        :root {
            /* Dark mode colors only */
            --bg-primary: #0f1419;
            --bg-secondary: #1a1f2e;
            --bg-tertiary: #242937;
            --text-primary: #e8ecf4;
            --text-secondary: #94a3b8;
            --text-tertiary: #64748b;
            --border: rgba(51, 65, 85, 0.8);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 15px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.6);
            --glass-bg: rgba(30, 41, 59, 0.7);
            --glass-border: rgba(51, 65, 85, 0.5);
            --accent: #6366f1;
            --accent-hover: #5558e3;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
        }

        /* ============================================
           LAYOUT & CONTAINERS
           ============================================ */
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            position: relative;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .logo-icon::before {
            content: "🎨";
            font-size: 20px;
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        /* ============================================
           ENHANCED BUTTON STYLES
           ============================================ */
        .btn {
            position: relative;
            padding: 12px 24px;
            border-radius: 7px;
            border: 1px solid var(--accent);
            font-size: 14px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 2px;
            background: transparent;
            color: var(--text-primary);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s ease-in;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: var(--accent);
            color: white;
            box-shadow: 0 0 30px 5px rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
            transition: all 0.2s ease-out;
        }

        .btn:hover::before {
            animation: sweep 0.5s linear;
        }

        .btn::before {
            content: '';
            display: block;
            width: 0px;
            height: 86%;
            position: absolute;
            top: 7%;
            left: 0%;
            opacity: 0;
            background: #fff;
            box-shadow: 0 0 50px 30px #fff;
            transform: skewX(-20deg);
        }

        @keyframes sweep {
            from { opacity: 0; left: 0%; }
            50% { opacity: 1; }
            to { opacity: 0; left: 100%; }
        }

        .btn:active {
            box-shadow: 0 0 0 0 transparent;
            transition: box-shadow 0.2s ease-in;
        }

        .btn-ghost {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .btn-ghost:hover {
            background: var(--bg-tertiary);
            border-color: var(--accent);
            color: var(--accent);
            box-shadow: 0 0 20px 3px rgba(99, 102, 241, 0.2);
        }

        .btn-success {
            border-color: var(--success);
            color: var(--success);
        }

        .btn-success:hover {
            background: var(--success);
            color: white;
            box-shadow: 0 0 30px 5px rgba(16, 185, 129, 0.3);
        }

        .btn-icon {
            padding: 10px;
            border-radius: 10px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--border);
        }

        /* ============================================
           NAVIGATION TABS WITH ENHANCED STYLING
           ============================================ */
        .nav-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-tab {
            position: relative;
            padding: 10px 20px;
            border-radius: 7px;
            border: 1px solid rgb(61, 106, 255);
            font-size: 14px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 2px;
            background: transparent;
            color: #fff;
            overflow: hidden;
            box-shadow: 0 0 0 0 transparent;
            -webkit-transition: all 0.2s ease-in;
            -moz-transition: all 0.2s ease-in;
            transition: all 0.2s ease-in;
            cursor: pointer;
            border: none;
        }

        .nav-tab:hover {
            background: rgb(61, 106, 255);
            box-shadow: 0 0 30px 5px rgba(0, 142, 236, 0.815);
            -webkit-transition: all 0.2s ease-out;
            -moz-transition: all 0.2s ease-out;
            transition: all 0.2s ease-out;
        }

        .nav-tab:hover::before {
            -webkit-animation: sh02 0.5s 0s linear;
            -moz-animation: sh02 0.5s 0s linear;
            animation: sh02 0.5s 0s linear;
        }

        .nav-tab::before {
            content: '';
            display: block;
            width: 0px;
            height: 86%;
            position: absolute;
            top: 7%;
            left: 0%;
            opacity: 0;
            background: #fff;
            box-shadow: 0 0 50px 30px #fff;
            -webkit-transform: skewX(-20deg);
            -moz-transform: skewX(-20deg);
            -ms-transform: skewX(-20deg);
            -o-transform: skewX(-20deg);
            transform: skewX(-20deg);
        }

        @keyframes sh02 {
            from {
                opacity: 0;
                left: 0%;
            }
            50% {
                opacity: 1;
            }
            to {
                opacity: 0;
                left: 100%;
            }
        }

        .nav-tab:active {
            box-shadow: 0 0 0 0 transparent;
            -webkit-transition: box-shadow 0.2s ease-in;
            -moz-transition: box-shadow 0.2s ease-in;
            transition: box-shadow 0.2s ease-in;
        }

        .nav-tab.active {
            background: rgb(61, 106, 255);
            box-shadow: 0 0 20px 3px rgba(61, 106, 255, 0.6);
            color: white;
        }

        /* ============================================
           TAB CONTENT PANELS
           ============================================ */
        .tab-content {
            display: none;
            animation: fadeInUp 0.4s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(20px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        /* ============================================
           GRADIENT FILTERS & GRID
           ============================================ */
        .filter-section {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid var(--glass-border);
        }

        .filter-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .filter-tag {
            padding: 8px 16px;
            border-radius: 20px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
        }

        .filter-tag:hover {
            background: var(--accent);
            color: white;
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        .filter-tag.active {
            background: linear-gradient(135deg, var(--accent), #8b5cf6);
            color: white;
            box-shadow: 0 3px 10px rgba(99, 102, 241, 0.3);
        }

        .gradients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .gradient-card {
            aspect-ratio: 1;
            border-radius: 20px;
            cursor: pointer !important;
            pointer-events: auto !important;
            position: relative !important;
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gradient-card * {
            pointer-events: auto;
}

        .gradient-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .gradient-card.selected {
            outline: 3px solid var(--accent);
            outline-offset: 2px;
            animation: pulse-border 2s ease-in-out infinite;
        }

        @keyframes pulse-border {
            0%, 100% { outline-color: var(--accent); }
            50% { outline-color: #8b5cf6; }
        }

        .gradient-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 12px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            backdrop-filter: blur(10px);
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gradient-card:hover .gradient-name {
            opacity: 1;
            transform: translateY(0);
        }

        .gradient-stats {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 6px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gradient-card:hover .gradient-stats {
            opacity: 1;
            transform: translateY(0);
        }

        .copy-gradient-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 18px;
            color: var(--accent);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            pointer-events: auto !important;
            z-index: 10 !important;
        }

        .gradient-card:hover .copy-gradient-btn {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto !important;
        }

        .copy-gradient-btn:hover {
            background: var(--accent);
            color: white;
            transform: translate(-50%, -50%) scale(1.1);
        }

        /* ============================================
           CUSTOM GRADIENT BUILDER ENHANCEMENTS
           ============================================ */
        .builder-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .preview-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px;
            min-height: 450px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .preview-box {
            flex: 1;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .preview-copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 10px;
            padding: 8px 12px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.8;
        }

        .preview-copy-btn:hover {
            background: var(--accent);
            color: white;
            transform: scale(1.05);
        }

        .controls-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-label {
            display: block;
            margin-bottom: 12px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .radio-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .radio-option {
            position: relative;
            display: inline-flex;
            align-items: center;
            padding: 10px 18px;
            border-radius: 12px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--bg-primary);
            font-weight: 500;
        }

        .radio-option input {
            position: absolute;
            opacity: 0;
        }

        .radio-option:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.2);
        }

        .radio-option input:checked + span {
            color: white;
        }

        .radio-option:has(input:checked) {
            border-color: var(--accent);
            background: linear-gradient(135deg, var(--accent), #8b5cf6);
            color: white;
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }

        /* Enhanced Slider Styles */
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: var(--bg-tertiary);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            position: relative;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), #8b5cf6);
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(99, 102, 241, 0.3);
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.5);
        }

        .slider::-moz-range-thumb {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), #8b5cf6);
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(99, 102, 241, 0.3);
        }

        .slider-value {
            min-width: 50px;
            text-align: center;
            font-weight: 700;
            color: var(--accent);
            font-size: 14px;
        }

        /* ============================================
           COLOR STOPS ENHANCEMENT
           ============================================ */
        .color-stops {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .color-stop {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: var(--bg-primary);
            border-radius: 16px;
            border: 2px solid var(--border);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .color-stop:hover {
            border-color: var(--accent);
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.1);
        }

        .color-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .color-preview {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            border: 3px solid var(--border);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .color-preview:hover {
            transform: scale(1.1);
            border-color: var(--accent);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .color-input {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .color-hex {
            flex: 1;
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: var(--bg-primary);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--text-tertiary);
        }

        .color-hex:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            color: var(--text-primary);
        }

        .remove-stop {
            padding: 10px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .remove-stop:hover {
            background: #dc2626;
            transform: scale(1.1) rotate(90deg);
        }

        /* ============================================
           ANIMATION DROPDOWN
           ============================================ */
        .animation-dropdown {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .animation-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .animation-select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* ============================================
           COLOR WHEEL STYLES
           ============================================ */
        .color-wheel-container {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: var(--bg-primary);
            border-radius: 16px;
            border: 2px solid var(--border);
            margin-bottom: 20px;
        }

        .color-wheel {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid var(--border);
            cursor: pointer;
            transition: all 0.3s;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            padding: 0;
            background: none;
            overflow: hidden;
        }
        .color-wheel::-webkit-color-swatch-wrapper {
            padding: 0;
            border: none;
            border-radius: 50%;
        }

        .color-wheel::-webkit-color-swatch {
            border: none;
            border-radius: 50%;
            box-shadow: none;
        }

        .color-wheel::-moz-color-swatch {
            border: none;
            border-radius: 50%;
            box-shadow: none;
        }

        .color-wheel:hover {
            transform: scale(1.05);
            border-color: var(--accent);
        }

        .color-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .color-code {
            padding: 8px 12px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        /* ============================================
           PALETTE STYLES
           ============================================ */
        .palettes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .palette-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .palette-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .palette-name {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--text-primary);
            text-align: center;
        }

        .palette-colors {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            border-radius: 12px;
            overflow: hidden;
        }

        .palette-color {
            flex: 1;
            height: 70px;
            position: relative;
            transition: all 0.3s;
            cursor: pointer;
        }

        .palette-color:hover {
            transform: scale(1.05);
            z-index: 1;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .palette-color-code {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 6px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 10px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s;
            font-family: 'Courier New', monospace;
            font-weight: 600;
        }

        .palette-color:hover .palette-color-code {
            opacity: 1;
        }

        /* ============================================
           BUTTON BUILDER ENHANCEMENTS
           ============================================ */
        .button-builder-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .button-controls-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 25px;
            max-height: 600px;
            overflow-y: auto;
        }

        .css-preview-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 25px;
        }

        .css-preview-code {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
            min-height: 400px;
            max-height: 400px;
            overflow-y: auto;
        }

        .effect-dropdown {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .effect-dropdown:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .import-gradient-section {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 12px;
        }

        .gradient-import-preview {
            width: 100%;
            height: 60px;
            border-radius: 8px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
        }

        .button-preview-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 30px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        .button-preview {
            padding: 40px;
            background: var(--bg-secondary);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            width: 100%;
            position: relative;
        }

        .preset-buttons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .preset-button-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 2px solid var(--glass-border);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .preset-button-card:hover {
            transform: translateY(-3px);
            border-color: var(--accent);
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.2);
        }

        .preset-button-card.selected {
            border-color: var(--accent);
            background: rgba(99, 102, 241, 0.1);
        }

        .code-import-area {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px dashed var(--border);
            border-radius: 12px;
            background: var(--bg-secondary);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            transition: all 0.3s;
        }

        .code-import-area:focus {
            outline: none;
            border-color: var(--accent);
            background: var(--bg-primary);
        }

        /* ============================================
           NOTIFICATION TOAST ENHANCEMENT
           ============================================ */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
            animation: slideInRight 0.3s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* ============================================
           ANIMATION CLASSES
           ============================================ */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes gradient-wave {
            0%, 100% { background-position: 0% 50%; }
            25% { background-position: 100% 50%; }
            75% { background-position: 50% 100%; }
        }

        @keyframes gradient-pulse {
            0%, 100% { 
                background-size: 400% 400%; 
                opacity: 1;
            }
            50% { 
                background-size: 600% 600%; 
                opacity: 0.8;
            }
        }

        @keyframes gradient-rotate {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        .animated-shift {
            background-size: 400% 400% !important;
            animation: gradient-shift 4s ease infinite;
        }

        .animated-wave {
            background-size: 400% 400% !important;
            animation: gradient-wave 6s ease infinite;
        }

        .animated-pulse {
            background-size: 400% 400% !important;
            animation: gradient-pulse 3s ease infinite;
        }

        .animated-rotate {
            animation: gradient-rotate 8s linear infinite;
        }

        /* ============================================
           SPARKLE ANIMATION
           ============================================ */
        @keyframes sparkle {
            0% { 
                transform: scale(0) rotate(0deg); 
                opacity: 0; 
            }
            50% { 
                transform: scale(1) rotate(180deg); 
                opacity: 1; 
            }
            100% { 
                transform: scale(0) rotate(360deg); 
                opacity: 0; 
            }
        }

        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: linear-gradient(45deg, #fff, #ffd700);
            border-radius: 50%;
            animation: sparkle 1.5s ease-in-out;
            pointer-events: none;
        }

        /* ============================================
           RESPONSIVE DESIGN UPDATES
           ============================================ */
        @media (max-width: 1200px) {
            .button-builder-container {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
            }
            
            .css-preview-section {
                grid-column: 1 / -1;
            }
        }

        @media (max-width: 768px) {
            .builder-container,
            .button-builder-container {
                grid-template-columns: 1fr;
            }

            .button-controls-section {
                max-height: none;
                overflow-y: visible;
            }

            .gradients-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .palettes-grid {
                grid-template-columns: 1fr;
            }

            .preset-buttons-grid {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                justify-content: center;
                flex-wrap: wrap;
                padding: 10px;
            }

            .nav-tab {
                padding: 8px 16px;
                font-size: 12px;
                letter-spacing: 1px;
            }

            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .radio-group {
                flex-direction: column;
            }

            .color-wheel-container {
                flex-direction: column;
                text-align: center;
            }

            .import-gradient-section {
                padding: 10px;
            }
        }

        @media (max-width: 480px) {
            .app-container {
                padding: 15px;
            }

            .nav-tab {
                padding: 6px 12px;
                font-size: 11px;
            }

            .btn {
                padding: 8px 16px;
                font-size: 12px;
            }

            .css-preview-code {
                font-size: 11px;
                padding: 15px;
            }
        }

        /* ============================================
           UTILITY CLASSES
           ============================================ */
        .text-center { text-align: center; }
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .flex { display: flex; }
        .gap-10 { gap: 10px; }
        .gap-20 { gap: 20px; }
        .hidden { display: none; }
        .animate__animated { animation-duration: 0.5s; }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ============================================
             HEADER SECTION
             ============================================ -->
        <header class="header">
            <div class="logo animate__animated animate__bounceInLeft">
                <div class="logo-icon"></div>
                <span>Gradient Studio Pro</span>
            </div>
            <div class="header-controls animate__animated animate__bounceInRight">
                <button class="btn btn-ghost" onclick="resetAll()">
                    <span>↺</span> Reset All
                </button>
            </div>
        </header>

        <!-- ============================================
             NAVIGATION TABS
             ============================================ -->
        <nav class="nav-tabs animate__animated animate__fadeInUp">
            <button class="nav-tab active" onclick="switchTab('prebuilt')">
                ✨ Prebuilt Gradients
            </button>
            <button class="nav-tab" onclick="switchTab('builder')">
                🛠️ Build Your Own
            </button>
            <button class="nav-tab" onclick="switchTab('palettes')">
                🎨 Color Palettes
            </button>
            <button class="nav-tab" onclick="switchTab('buttons')">
                🔘 Button Builder
            </button>
        </nav>

        <!-- ============================================
             PREBUILT GRADIENTS TAB
             ============================================ -->
        <div class="tab-content active" id="prebuilt-tab">
            <div class="filter-section animate__animated animate__fadeIn">
                <div class="filter-tags">
                    <div class="filter-tag active" onclick="filterGradients('all')">All</div>
                    <div class="filter-tag" onclick="filterGradients('warm')">🔥 Warm</div>
                    <div class="filter-tag" onclick="filterGradients('cool')">❄️ Cool</div>
                    <div class="filter-tag" onclick="filterGradients('pastel')">🌸 Pastel</div>
                    <div class="filter-tag" onclick="filterGradients('vibrant')">💎 Vibrant</div>
                    <div class="filter-tag" onclick="filterGradients('dark')">🌙 Dark</div>
                    <div class="filter-tag" onclick="filterGradients('multi')">🌈 Multi-color</div>
                </div>
            </div>
            <div class="flex gap-20 mb-20">
                <button class="btn btn-primary" onclick="shuffleGradients()">
                    🎲 Shuffle Gradients
                </button>
            </div>
            <div class="gradients-grid" id="gradients-grid"></div>
        </div>

        <!-- ============================================
             BUILD YOUR OWN TAB
             ============================================ -->
        <div class="tab-content" id="builder-tab">
            <!-- Import from Prebuilt Section -->
            <div class="import-gradient-section">
                <h3>Import from Prebuilt Gradients</h3>
                <p style="color: var(--text-secondary); margin-bottom: 10px;">Select a gradient from Prebuilt Gradients and click to import:</p>
                <button class="btn btn-secondary" onclick="importSelectedGradient()">
                    🔥 Import Selected Gradient
                </button>
                <div class="gradient-import-preview" id="import-preview" style="background: linear-gradient(45deg, #667eea, #764ba2);">
                    Select a gradient to preview
                </div>
            </div>

            <div class="builder-container" style="grid-template-columns: 1fr 1fr 1fr;">
                <!-- Preview Section -->
                <div class="preview-section">
                    <h3>Live Preview</h3>
                    <div class="preview-box" id="custom-preview">
                        <button class="preview-copy-btn" onclick="copyCustomGradient()">📋 Copy CSS</button>
                    </div>
                </div>

                <!-- Controls Section -->
                <div class="controls-section">
                    <!-- Gradient Type -->
                    <div class="control-group">
                        <label class="control-label">Gradient Type</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="gradient-type" value="linear" checked onchange="updateCustomGradient()">
                                <span>Linear</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gradient-type" value="radial" onchange="updateCustomGradient()">
                                <span>Radial</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gradient-type" value="conic" onchange="updateCustomGradient()">
                                <span>Conic</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Angle Control -->
                    <div class="control-group" id="angle-control">
                        <label class="control-label">Angle (Linear Gradient)</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="angle-slider" min="0" max="360" value="45" oninput="updateCustomGradient()">
                            <span class="slider-value" id="angle-value">45°</span>
                        </div>
                    </div>

                    <!-- Animation Controls -->
                    <div class="control-group">
                        <label class="control-label">Animation Type</label>
                        <select class="animation-select" id="animation-type" onchange="applyAnimation()">
                            <option value="none">No Animation</option>
                            <option value="shift">Smooth Shift</option>
                            <option value="wave">Wave Effect</option>
                            <option value="pulse">Pulse Effect</option>
                            <option value="rotate">Color Rotation</option>
                        </select>
                    </div>

                    <!-- Animation Speed -->
                    <div class="control-group" id="animation-speed-control" style="display: none;">
                        <label class="control-label">Animation Speed</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="animation-speed" min="1" max="10" value="4" oninput="updateAnimationSpeed()">
                            <span class="slider-value" id="animation-speed-value">4s</span>
                        </div>
                    </div>

                    <!-- Animation Direction -->
                    <div class="control-group" id="animation-direction-control" style="display: none;">
                        <label class="control-label">Animation Direction</label>
                        <select class="effect-dropdown" id="animation-direction" onchange="updateAnimationDirection()">
                            <option value="normal">Normal</option>
                            <option value="reverse">Reverse</option>
                            <option value="alternate">Alternate</option>
                            <option value="alternate-reverse">Alternate Reverse</option>
                        </select>
                    </div>

                    <!-- Conic Gradient Controls -->
                    <div class="control-group" id="conic-controls" style="display: none;">
                        <label class="control-label">Conic Color Blending</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="conic-blend" min="0" max="100" value="50" oninput="updateConicBlend()">
                            <span class="slider-value" id="conic-blend-value">50%</span>
                        </div>
                    </div>

                    <!-- Color Wheel Section -->
                    <div class="control-group">
                        <label class="control-label">Color Picker</label>
                        <div class="color-wheel-container">
                            <input type="color" class="color-wheel" id="color-wheel" value="#667eea" onchange="updateColorWheel()">
                            <div class="color-info">
                                <div class="color-code" id="hex-code">HEX: #667eea</div>
                                <div class="color-code" id="rgb-code">RGB: rgb(102, 126, 234)</div>
                                <button class="btn btn-secondary" onclick="addColorFromWheel()">Add Color</button>
                            </div>
                        </div>
                    </div>

                    <!-- Color Stops -->
                    <div class="control-group">
                        <label class="control-label">Color Stops</label>
                        <div class="color-stops" id="color-stops">
                            <div class="color-stop">
                                <div class="color-input-wrapper">
                                    <div class="color-preview" style="background: #667eea" onclick="this.nextElementSibling.click()"></div>
                                    <input type="color" class="color-input" value="#667eea" onchange="updateColorStop(this)">
                                    <input type="text" class="color-hex" value="#667eea" onchange="updateColorStopHex(this)" placeholder="Enter hex code">
                                </div>
                            </div>
                            <div class="color-stop">
                                <div class="color-input-wrapper">
                                    <div class="color-preview" style="background: #764ba2" onclick="this.nextElementSibling.click()"></div>
                                    <input type="color" class="color-input" value="#764ba2" onchange="updateColorStop(this)">
                                    <input type="text" class="color-hex" value="#764ba2" onchange="updateColorStopHex(this)" placeholder="Enter hex code">
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-secondary mt-20" onclick="addColorStop()">
                            + Add Color Stop
                        </button>
                    </div>
                </div>

                <!-- CSS Preview Section -->
                <div class="css-preview-section">
                    <h3>Live CSS Preview</h3>
                    <div class="css-preview-code" id="gradient-css-preview">
/* Your gradient CSS will appear here */
.custom-gradient {
    background: linear-gradient(45deg, #667eea, #764ba2);
}
                    </div>
                    <button class="btn btn-success mt-20" onclick="copyGradientCSSFromPreview()">📋 Copy This CSS</button>
                </div>
            </div>
        </div>

        <!-- ============================================
             COLOR PALETTES TAB
             ============================================ -->
        <div class="tab-content" id="palettes-tab">
            <div class="flex gap-20 mb-20">
                <button class="btn btn-primary" onclick="shufflePalettes()">
                    🎲 Shuffle Palettes
                </button>
            </div>
            <div class="palettes-grid" id="palettes-grid"></div>
        </div>

        <!-- ============================================
             BUTTON BUILDER TAB
             ============================================ -->
        <div class="tab-content" id="buttons-tab">
            <div class="button-builder-container">
                <!-- Preview Section -->
                <div class="button-preview-section">
                    <h3>Button Preview</h3>
                    <div class="button-preview" id="button-preview">
                        <button class="btn btn-primary" id="preview-button">Sample Button</button>
                    </div>
                    <div class="flex gap-10 mt-20">
                        <button class="btn btn-success" onclick="copyButtonCSS()">📋 Copy CSS</button>
                        <button class="btn btn-secondary" onclick="resetButton()">↺ Reset</button>
                    </div>
                </div>

                <!-- Enhanced Controls Section -->
                <div class="button-controls-section">
                    <h3>Button Controls</h3>
                    
                    <!-- Button Text -->
                    <div class="control-group">
                        <label class="control-label">Button Text</label>
                        <input type="text" class="color-hex" id="button-text" value="Sample Button" oninput="updateButtonText()" placeholder="Enter button text">
                    </div>

                    <!-- Background Controls -->
                    <div class="control-group">
                        <label class="control-label">Background Type</label>
                        <select class="effect-dropdown" id="bg-type" onchange="updateButtonStyle()">
                            <option value="solid">Solid Color</option>
                            <option value="gradient">Gradient</option>
                            <option value="transparent">Transparent</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Background Color</label>
                        <input type="color" class="color-wheel" id="bg-color" value="#667eea" onchange="updateButtonStyle()">
                    </div>

                    <!-- Border Controls -->
                    <div class="control-group">
                        <label class="control-label">Border Width</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="border-width" min="0" max="10" value="0" oninput="updateButtonStyle()">
                            <span class="slider-value" id="border-width-value">0px</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Border Color</label>
                        <input type="color" class="color-wheel" id="border-color" value="#667eea" onchange="updateButtonStyle()">
                    </div>

                    <!-- Padding Controls -->
                    <div class="control-group">
                        <label class="control-label">Padding</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="padding" min="5" max="30" value="12" oninput="updateButtonStyle()">
                            <span class="slider-value" id="padding-value">12px</span>
                        </div>
                    </div>

                    <!-- Border Radius -->
                    <div class="control-group">
                        <label class="control-label">Border Radius</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="border-radius" min="0" max="50" value="8" oninput="updateButtonStyle()">
                            <span class="slider-value" id="border-radius-value">8px</span>
                        </div>
                    </div>

                    <!-- Font Controls -->
                    <div class="control-group">
                        <label class="control-label">Font Size</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="font-size" min="10" max="24" value="14" oninput="updateButtonStyle()">
                            <span class="slider-value" id="font-size-value">14px</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Font Weight</label>
                        <select class="effect-dropdown" id="font-weight" onchange="updateButtonStyle()">
                            <option value="300">Light</option>
                            <option value="400">Normal</option>
                            <option value="500">Medium</option>
                            <option value="600" selected>Semi-Bold</option>
                            <option value="700">Bold</option>
                            <option value="800">Extra Bold</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Text Color</label>
                        <input type="color" class="color-wheel" id="text-color" value="#ffffff" onchange="updateButtonStyle()">
                    </div>

                    <!-- Shadow Controls -->
                    <div class="control-group">
                        <label class="control-label">Shadow Blur</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="shadow-blur" min="0" max="20" value="0" oninput="updateButtonStyle()">
                            <span class="slider-value" id="shadow-blur-value">0px</span>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label">Shadow Spread</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="shadow-spread" min="0" max="10" value="0" oninput="updateButtonStyle()">
                            <span class="slider-value" id="shadow-spread-value">0px</span>
                        </div>
                    </div>

                    <!-- Hover Effects -->
                    <div class="control-group">
                        <label class="control-label">Hover Effect</label>
                        <select class="effect-dropdown" id="hover-effect" onchange="updateButtonStyle()">
                            <option value="none">None</option>
                            <option value="lift">Lift Up</option>
                            <option value="glow">Glow</option>
                            <option value="scale">Scale</option>
                            <option value="darken">Darken</option>
                            <option value="lighten">Lighten</option>
                            <option value="rotate">Rotate</option>
                            <option value="skew">Skew</option>
                        </select>
                    </div>

                    <!-- Gradient Application -->
                    <div class="control-group">
                        <label class="control-label">Apply Gradient</label>
                        <div class="flex gap-10">
                            <button class="btn btn-secondary" onclick="applySelectedGradient()">Use Selected</button>
                            <button class="btn btn-secondary" onclick="applyCustomGradient()">Use Custom</button>
                        </div>
                    </div>

                    <!-- Import Code -->
                    <div class="control-group">
                        <label class="control-label">Import Button Code</label>
                        <textarea class="code-import-area" id="import-code" placeholder="Paste button HTML/CSS code here..." oninput="importButtonCode()"></textarea>
                    </div>
                </div>

                <!-- CSS Preview Section -->
                <div class="css-preview-section">
                    <h3>Live CSS Preview</h3>
                    <div class="css-preview-code" id="css-preview">
/* Your button CSS will appear here */
.custom-button {
    background: #667eea;
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.custom-button:hover {
    transform: translateY(-2px);
}
                    </div>
                    <button class="btn btn-success mt-20" onclick="copyButtonCSSFromPreview()">📋 Copy This CSS</button>
                </div>
            </div>

            <!-- Preset Buttons -->
            <div class="preset-buttons-grid" id="preset-buttons-grid">
                <!-- Presets will be rendered here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span>✓</span>
        <span id="toast-message">Success!</span>
    </div>

    <script>
        /* ============================================
           GRADIENT & PALETTE DATA - MASSIVE COLLECTION
           ============================================ */
        const prebuiltGradients = [
            // Warm Gradients
            { name: "Sunset Bliss", type: "linear", angle: 45, colors: ["#ff6b6b", "#feca57"], category: "warm" },
            { name: "Fire Phoenix", type: "linear", angle: 45, colors: ["#ff512f", "#dd2476"], category: "warm" },
            { name: "Golden Hour", type: "radial", colors: ["#f6d365", "#fda085"], category: "warm" },
            { name: "Peachy Keen", type: "linear", angle: 90, colors: ["#ffecd2", "#fcb69f"], category: "warm" },
            { name: "Coral Reef", type: "linear", angle: 135, colors: ["#ff6b9d", "#c44569", "#524763"], category: "warm" },
            { name: "Volcano", type: "radial", colors: ["#e53935", "#e35d5b"], category: "warm" },
            { name: "Candy Stripe", type: "linear", angle: 45, colors: ["#fe8c00", "#f83600"], category: "warm" },
            { name: "Mango Pulp", type: "linear", angle: 60, colors: ["#f09433", "#e6683c", "#dc2743", "#cc2366", "#bc1888"], category: "warm" },
            { name: "Flare", type: "linear", angle: 0, colors: ["#f12711", "#f5af19"], category: "warm" },
            { name: "Warm Flame", type: "linear", angle: 45, colors: ["#ff9a56", "#ff6a56", "#ff5656"], category: "warm" },
            { name: "Juicy Peach", type: "linear", angle: 90, colors: ["#ffecd2", "#fcb69f"], category: "warm" },
            { name: "Lady Lips", type: "linear", angle: 90, colors: ["#ff9a9e", "#fecfef", "#fecfef"], category: "warm" },
            { name: "Sunny Morning", type: "linear", angle: 120, colors: ["#f6d365", "#fda085"], category: "warm" },
            { name: "Burning Orange", type: "linear", angle: 15, colors: ["#ff416c", "#ff4b2b"], category: "warm" },
            { name: "Ultra Violet", type: "linear", angle: 60, colors: ["#654ea3", "#eaafc8"], category: "warm" },
            { name: "Summer Dog", type: "linear", angle: 45, colors: ["#a8ff78", "#78ffd6"], category: "warm" },
            { name: "Amber Sunrise", type: "linear", angle: 45, colors: ["#ffb347", "#ffcc33"], category: "warm" },
            { name: "Coral Glow", type: "linear", angle: 90, colors: ["#ff9966", "#ff5e62"], category: "warm" },
            { name: "Desert Mirage", type: "radial", colors: ["#f79d00", "#64f38c"], category: "warm" },
            { name: "Rose Dawn", type: "linear", angle: 120, colors: ["#ffafbd", "#ffc3a0"], category: "warm" },
            { name: "Citrus Pop", type: "linear", angle: 180, colors: ["#ff9a00", "#ff4e00"], category: "warm" },
            
            // Cool Gradients
            { name: "Ocean Wave", type: "linear", angle: 135, colors: ["#667eea", "#764ba2"], category: "cool" },
            { name: "Arctic Aurora", type: "linear", angle: 0, colors: ["#00d2ff", "#3a7bd5"], category: "cool" },
            { name: "Electric Blue", type: "linear", angle: 45, colors: ["#00c6ff", "#0072ff"], category: "cool" },
            { name: "Deep Ocean", type: "linear", angle: 180, colors: ["#1a2980", "#26d0ce"], category: "cool" },
            { name: "Midnight Sky", type: "linear", angle: 180, colors: ["#2c3e50", "#3498db"], category: "cool" },
            { name: "Twilight", type: "linear", angle: 270, colors: ["#0f2027", "#203a43", "#2c5364"], category: "cool" },
            { name: "Dark Knight", type: "linear", angle: 40, colors: ["#ba8b02", "#181818"], category: "cool" },
            { name: "Cool Blues", type: "linear", angle: 0, colors: ["#2193b0", "#6dd5ed"], category: "cool" },
            { name: "Moonlit Asteroid", type: "linear", angle: 45, colors: ["#0f2027", "#203a43", "#2c5364"], category: "cool" },
            { name: "JShine", type: "linear", angle: 60, colors: ["#12c2e9", "#c471ed", "#f64f59"], category: "cool" },
            { name: "Evening Night", type: "linear", angle: 0, colors: ["#005aa7", "#fffde4"], category: "cool" },
            { name: "Blue Raspberry", type: "linear", angle: 135, colors: ["#00b4db", "#0083b0"], category: "cool" },
            { name: "Sea Blizz", type: "linear", angle: 180, colors: ["#1cd8d2", "#93edc7"], category: "cool" },
            { name: "Sublime Light", type: "linear", angle: 135, colors: ["#fc5c7d", "#6a82fb"], category: "cool" },
            { name: "Superman", type: "linear", angle: 0, colors: ["#0099f7", "#f11712"], category: "cool" },
            { name: "Subu", type: "linear", angle: 135, colors: ["#0cebeb", "#20e3b2", "#29ffc6"], category: "cool" },
            { name: "Frozen Lake", type: "linear", angle: 45, colors: ["#83a4d4", "#b6fbff"], category: "cool" },
            { name: "Mint Breeze", type: "linear", angle: 120, colors: ["#00c9ff", "#92fe9d"], category: "cool" },
            { name: "Deep Space", type: "linear", angle: 180, colors: ["#000046", "#1cb5e0"], category: "cool" },
            { name: "Blue Horizon", type: "linear", angle: 270, colors: ["#36d1dc", "#5b86e5"], category: "cool" },
            { name: "Crystal Ice", type: "radial", colors: ["#e0f7fa", "#80deea", "#26c6da"], category: "cool" },
            
            // Pastel Gradients
            { name: "Cotton Candy", type: "radial", colors: ["#fbc2eb", "#a6c1ee"], category: "pastel" },
            { name: "Berry Smoothie", type: "linear", angle: 180, colors: ["#ee9ca7", "#ffdde1"], category: "pastel" },
            { name: "Lavender Dream", type: "radial", colors: ["#a8edea", "#fed6e3"], category: "pastel" },
            { name: "Ice Cream", type: "radial", colors: ["#ffeaa7", "#dfe6e9", "#fdcb6e"], category: "pastel" },
            { name: "Bubblegum", type: "radial", colors: ["#ff9a9e", "#fecfef", "#fecfef", "#fad0c4"], category: "pastel" },
            { name: "Morning Dew", type: "linear", angle: 120, colors: ["#fdfbfb", "#ebedee"], category: "pastel" },
            { name: "Sweet Period", type: "linear", angle: 135, colors: ["#ff758c", "#ff7eb3"], category: "pastel" },
            { name: "Plum Bath", type: "linear", angle: 0, colors: ["#cc2b5e", "#753a88"], category: "pastel" },
            { name: "Happy Fisher", type: "linear", angle: 120, colors: ["#89f7fe", "#66a6ff"], category: "pastel" },
            { name: "Mauve", type: "linear", angle: 135, colors: ["#42275a", "#734b6d"], category: "pastel" },
            { name: "Deep Sea", type: "linear", angle: 180, colors: ["#e0c3fc", "#8ec5fc"], category: "pastel" },
            { name: "Grapefruit Sunset", type: "linear", angle: 180, colors: ["#e96443", "#904e95"], category: "pastel" },
            { name: "Sugar Lollipop", type: "linear", angle: 180, colors: ["#a8edea", "#fed6e3"], category: "pastel" },
            { name: "Sweet Morning", type: "linear", angle: 45, colors: ["#ff5f6d", "#ffc371"], category: "pastel" },
            { name: "Winter Woods", type: "linear", angle: 135, colors: ["#333333", "#dd1818"], category: "pastel" },
            { name: "Dusty Grass", type: "linear", angle: 120, colors: ["#d4fc79", "#96e6a1"], category: "pastel" },
            { name: "Dreamy Pink", type: "linear", angle: 45, colors: ["#fbc2eb", "#f6d365"], category: "pastel" },
            { name: "Cotton Sky", type: "linear", angle: 135, colors: ["#cfd9df", "#e2ebf0"], category: "pastel" },
            { name: "Soft Cloud", type: "radial", colors: ["#d9afd9", "#97d9e1"], category: "pastel" },
            { name: "Peach Mist", type: "linear", angle: 180, colors: ["#ffecd2", "#fcb69f"], category: "pastel" },
            { name: "Lilac Haze", type: "linear", angle: 60, colors: ["#a18cd1", "#fbc2eb"], category: "pastel" },    
        
            
            // Vibrant Gradients
            { name: "Tropical Paradise", type: "linear", angle: 45, colors: ["#f093fb", "#f5576c"], category: "vibrant" },
            { name: "Neon Nights", type: "conic", colors: ["#ff0099", "#493240", "#00ffcc"], category: "vibrant" },
            { name: "Cyber Punk", type: "linear", angle: 225, colors: ["#f953c6", "#b91d73"], category: "vibrant" },
            { name: "Rainbow Road", type: "linear", angle: 90, colors: ["#ff0000", "#ff7f00", "#ffff00", "#00ff00", "#0000ff", "#4b0082", "#9400d3"], category: "vibrant" },
            { name: "Solar Flare", type: "conic", colors: ["#ff8008", "#ffc837"], category: "vibrant" },
            { name: "Miami Vice", type: "linear", angle: 45, colors: ["#ff006e", "#ff417d", "#ff758c", "#ffb3c1", "#ffe5ec"], category: "vibrant" },
            { name: "Synthwave", type: "linear", angle: 90, colors: ["#ff1b6b", "#ff006e", "#fc0070", "#c4007a", "#45006e"], category: "vibrant" },
            { name: "Retro", type: "linear", angle: 180, colors: ["#3f51b1", "#5a55ae", "#7b5fac", "#8f6aae", "#a86aa4", "#cc6b8e", "#f18271", "#f3a469", "#f7c978"], category: "vibrant" },
            { name: "Yoda", type: "linear", angle: 60, colors: ["#ff0099", "#493240"], category: "vibrant" },
            { name: "Amin", type: "linear", angle: 0, colors: ["#8e2de2", "#4a00e0"], category: "vibrant" },
            { name: "Harvey", type: "linear", angle: 0, colors: ["#1f4037", "#99f2c8"], category: "vibrant" },
            { name: "Neuromancer", type: "linear", angle: 90, colors: ["#f953c6", "#b91d73"], category: "vibrant" },
            { name: "Disco", type: "linear", angle: 45, colors: ["#4ecdc4", "#44a08d"], category: "vibrant" },
            { name: "Lollipop", type: "linear", angle: 180, colors: ["#a445b2", "#d41872", "#ff0066"], category: "vibrant" },
            { name: "Vice City", type: "linear", angle: 0, colors: ["#3494e6", "#ec6ead"], category: "vibrant" },
            { name: "Party Bliss", type: "linear", angle: 270, colors: ["#360033", "#0b8793"], category: "vibrant" },
            { name: "Plasma Beam", type: "linear", angle: 45, colors: ["#12c2e9", "#c471ed", "#f64f59"], category: "vibrant" },
            { name: "Toxic Neon", type: "linear", angle: 135, colors: ["#00ff87", "#60efff"], category: "vibrant" },
            { name: "Electric Sunset", type: "linear", angle: 90, colors: ["#fc466b", "#3f5efb"], category: "vibrant" },
            { name: "Candy Pop", type: "radial", colors: ["#ff6a88", "#ff99ac"], category: "vibrant" },
            { name: "Neon Pulse", type: "linear", angle: 180, colors: ["#0cebeb", "#20e3b2", "#29ffc6"], category: "vibrant" },
    
            
            // Dark Gradients
            { name: "Midnight Blues", type: "linear", angle: 180, colors: ["#020024", "#090979", "#00d4ff"], category: "dark" },
            { name: "Shadow Night", type: "linear", angle: 135, colors: ["#141e30", "#243b55"], category: "dark" },
            { name: "Dark Skies", type: "linear", angle: 180, colors: ["#1e3c72", "#2a5298"], category: "dark" },
            { name: "Witching Hour", type: "linear", angle: 45, colors: ["#c31432", "#240b36"], category: "dark" },
            { name: "Royal", type: "linear", angle: 0, colors: ["#141e30", "#243b55"], category: "dark" },
            { name: "Dark Ocean", type: "linear", angle: 135, colors: ["#373b44", "#4286f4"], category: "dark" },
            { name: "Grade Grey", type: "linear", angle: 180, colors: ["#bdc3c7", "#2c3e50"], category: "dark" },
            { name: "Ash", type: "linear", angle: 0, colors: ["#606c88", "#3f4c6b"], category: "dark" },
            { name: "Cherryblossoms", type: "linear", angle: 135, colors: ["#fbd3e9", "#bb377d"], category: "dark" },
            { name: "Parklife", type: "linear", angle: 180, colors: ["#add100", "#7b920a"], category: "dark" },
            { name: "Dance", type: "linear", angle: 135, colors: ["#ffc371", "#ff5f6d"], category: "dark" },
            { name: "Sylvia", type: "linear", angle: 180, colors: ["#ff4b1f", "#ff9068"], category: "dark" },
            { name: "Pinky", type: "linear", angle: 135, colors: ["#dd5e89", "#f7bb97"], category: "dark" },
            { name: "Purple Paradise", type: "linear", angle: 180, colors: ["#1d2b64", "#f8cdda"], category: "dark" },
            { name: "Honey Dew", type: "linear", angle: 135, colors: ["#43cea2", "#185a9d"], category: "dark" },
            { name: "River City", type: "linear", angle: 180, colors: ["#4481eb", "#04befe"], category: "dark" },
            { name: "Obsidian", type: "linear", angle: 180, colors: ["#0f2027", "#203a43", "#2c5364"], category: "dark" },
            { name: "Midnight Purple", type: "linear", angle: 135, colors: ["#41295a", "#2f0743"], category: "dark" },
            { name: "Carbon Steel", type: "linear", angle: 60, colors: ["#232526", "#414345"], category: "dark" },
            { name: "Black Gold", type: "linear", angle: 180, colors: ["#232526", "#414345", "#ffd700"], category: "dark" },
            { name: "Galaxy Fade", type: "radial", colors: ["#141e30", "#243b55"], category: "dark" },
            
            // Multi-color Gradients
            { name: "Cosmic Dust", type: "linear", angle: 120, colors: ["#4158d0", "#c850c0", "#ffcc70"], category: "multi" },
            { name: "Northern Lights", type: "linear", angle: 60, colors: ["#43e97b", "#38f9d7"], category: "multi" },
            { name: "Cherry Blossom", type: "linear", angle: 45, colors: ["#fbcfe8", "#e11d48"], category: "multi" },
            { name: "Mystic Purple", type: "linear", angle: 270, colors: ["#b91c1c", "#7c3aed", "#1e40af"], category: "multi" },
            { name: "Emerald City", type: "linear", angle: 135, colors: ["#0ba360", "#3cba92"], category: "multi" },
            { name: "Vintage Rose", type: "radial", colors: ["#ffdde1", "#ee9ca7", "#a8716a"], category: "multi" },
            { name: "Mint Fresh", type: "linear", angle: 45, colors: ["#00b09b", "#96c93d"], category: "multi" },
            { name: "Galaxy", type: "radial", colors: ["#000428", "#004e92"], category: "multi" },
            { name: "Spring Meadow", type: "linear", angle: 60, colors: ["#56ab2f", "#a8e063"], category: "multi" },
            { name: "Forest Mist", type: "linear", angle: 90, colors: ["#38ef7d", "#11998e"], category: "multi" },
            { name: "Aurora Flow", type: "linear", angle: 60, colors: ["#00c6ff", "#0072ff", "#00ff87"], category: "multi" },
            { name: "Prism Burst", type: "linear", angle: 90, colors: ["#f093fb", "#f5576c", "#fddb92"], category: "multi" },
            { name: "Pastel Rainbow", type: "linear", angle: 120, colors: ["#a1c4fd", "#c2e9fb", "#d4fc79", "#96e6a1"], category: "multi" },
            { name: "Spectrum", type: "linear", angle: 180, colors: ["#833ab4", "#fd1d1d", "#fcb045"], category: "multi" },
            { name: "Cosmic Flow", type: "conic", colors: ["#36096d", "#37d5d6", "#36096d"], category: "multi" }
        ];

        const colorPalettes = [
            // Enhanced palette collection
            { name: "Pastel Dreams", colors: ["#FFE5E5", "#FFE5F1", "#FFF0F5", "#F8E5FF", "#E5E5FF"] },
            { name: "Ocean Depths", colors: ["#03045E", "#023E8A", "#0077B6", "#0096C7", "#00B4D8", "#48CAE4"] },
            { name: "Autumn Leaves", colors: ["#D35400", "#E67E22", "#F39C12", "#F1C40F", "#9A7D0A"] },
            { name: "Modern Tech", colors: ["#0A0E27", "#151A3C", "#3D52A0", "#7091E6", "#8697C4"] },
            { name: "Desert Sunset", colors: ["#FF6B35", "#F77B54", "#FFB563", "#FFD97D", "#FFEE93"] },
            { name: "Nordic Winter", colors: ["#E8F1F5", "#D3E5EF", "#A8DADC", "#457B9D", "#1D3557"] },
            { name: "Tropical Vibes", colors: ["#05668D", "#028090", "#00A896", "#02C39A", "#F0F3BD"] },
            { name: "Vintage Charm", colors: ["#264653", "#2A9D8F", "#E9C46A", "#F4A261", "#E76F51"] },
            { name: "Neon City", colors: ["#FF006E", "#FB5607", "#FFBE0B", "#8338EC", "#3A86FF"] },
            { name: "Earth Tones", colors: ["#582F0E", "#7F4F24", "#936639", "#A68A64", "#B99C6B"] },
            { name: "Candy Shop", colors: ["#FFADAD", "#FFD6A5", "#FDFFB6", "#CAFFBF", "#9BF6FF", "#A0C4FF"] },
            { name: "Midnight Blues", colors: ["#03071E", "#370617", "#6A040F", "#9D0208", "#D00000"] },
            { name: "Spring Garden", colors: ["#DAF7A6", "#FFC300", "#FF5733", "#C70039", "#900C3F"] },
            { name: "Monochrome", colors: ["#000000", "#333333", "#666666", "#999999", "#CCCCCC", "#FFFFFF"] },
            { name: "Royal Purple", colors: ["#10002B", "#240046", "#3C096C", "#5A189A", "#7209B7", "#9A48D0"] },
            { name: "Coffee Break", colors: ["#3C2415", "#6F4E37", "#A67B5B", "#C4A381", "#ECB176"] },
            { name: "Miami Vice", colors: ["#FF61D8", "#FE8EBF", "#FFBAA4", "#FFDDCC", "#FFF5E1"] },
            { name: "Forest Floor", colors: ["#2D3E0F", "#3E5C1B", "#4F7A27", "#609833", "#71B63F"] },
            { name: "Berry Mix", colors: ["#3F0D3F", "#6B1F6B", "#973197", "#C343C3", "#EF55EF"] },
            { name: "Ocean Coral", colors: ["#FF6F61", "#FF8C82", "#FFB3A7", "#FFDAC1", "#FFF2E5"] },
            { name: "Cyberpunk Glow", colors: ["#08F7FE", "#09FBD3", "#FE53BB", "#F5D300", "#FF2281"] },
            { name: "Mossy Grove", colors: ["#3B5E2B", "#6B8E23", "#A4C639", "#CDE77F", "#F5FBEF"] },
            { name: "Lava Flow", colors: ["#2C0703", "#7B0D1E", "#B31312", "#E94F37", "#FF6B6B"] },
            { name: "Arctic Ice", colors: ["#E0FBFC", "#C2DFE3", "#9DB4C0", "#5C6B73", "#253237"] },
            { name: "Sunset Glow", colors: ["#FF9E00", "#FB5607", "#FF006E", "#8338EC", "#3A86FF"] },
            { name: "Galaxy Dreams", colors: ["#0F0C29", "#302B63", "#24243E", "#6D67E4", "#B393D3"] },
            { name: "Peach Sorbet", colors: ["#FFD6BA", "#FBC4AB", "#FFB4A2", "#E5989B", "#B5838D"] },
            { name: "Retro Arcade", colors: ["#00FF00", "#00FFFF", "#FF00FF", "#FFFF00", "#FF0000"] },
            { name: "Steel & Stone", colors: ["#2E2E2E", "#474747", "#6B6B6B", "#A0A0A0", "#D9D9D9"] },
            { name: "Golden Hour", colors: ["#FFB347", "#FFD700", "#FFA500", "#FF8C00", "#FF6347"] },
            { name: "Aurora Borealis", colors: ["#2E0249", "#570A57", "#A91079", "#F806CC", "#C3F8FF"] },
            { name: "Serene Lake", colors: ["#CAF0F8", "#ADE8F4", "#90E0EF", "#48CAE4", "#0096C7"] },
            { name: "Rose Garden", colors: ["#FFE5EC", "#FFC2D1", "#FFB3C6", "#FF8FAB", "#FB6F92"] },
            { name: "Mystic Forest", colors: ["#1A472A", "#2D6A4F", "#40916C", "#74C69D", "#95D5B2"] },
            { name: "Sandstorm", colors: ["#C2B280", "#E0C097", "#E6BE8A", "#D9CAB3", "#FFF5E1"] },
            { name: "Electric Storm", colors: ["#120078", "#9D0191", "#FD3A69", "#FEDD00", "#32E875"] },
            { name: "Ice Cream Pop", colors: ["#FF9CEE", "#FFDEE9", "#B5DEFF", "#C1FFD7", "#FFF5BA"] },
            { name: "Obsidian Night", colors: ["#0B090A", "#161A1D", "#2B2D42", "#3A0CA3", "#7209B7"] },
            { name: "Citrus Twist", colors: ["#FFFAE3", "#FFF5B7", "#FFD93D", "#FF9F1C", "#FF6B35"] },
            { name: "Deep Jungle", colors: ["#042A2B", "#085F63", "#6FB98F", "#A7C957", "#F2E8CF"] },
            { name: "Glassmorphism Frost", colors: ["#FFFFFF", "#F5F7FA", "#E4EBF5", "#C9D6FF", "#E2E2E2"] },
            { name: "Muted Elegance", colors: ["#1E1E2E", "#2A2A40", "#3E3E55", "#71717A", "#D4D4D8"] },
            { name: "Vibrant Gradient", colors: ["#FF6CAB", "#FF8F6C", "#FFD93D", "#6BCB77", "#4D96FF"] },
            { name: "Soft Neutrals", colors: ["#F9F9F9", "#E8E8E8", "#D1D1D1", "#A1A1A1", "#595959"] },
            { name: "Fresh Mint", colors: ["#D3F9D8", "#A2F5BF", "#7AE582", "#4CAF50", "#2E7D32"] },
            { name: "Digital Lavender", colors: ["#F3E8FF", "#E9D5FF", "#C084FC", "#A855F7", "#7C3AED"] },
            { name: "Peach Cloud", colors: ["#FFF5E1", "#FFE0CC", "#FFBFA9", "#FF9B9B", "#FF6B6B"] },
            { name: "Arctic Breeze", colors: ["#E6FFFA", "#B2F5EA", "#81E6D9", "#319795", "#2C7A7B"] },
            { name: "Charcoal Luxe", colors: ["#0D0D0D", "#1A1A1A", "#262626", "#404040", "#8C8C8C"] },
            { name: "Cyber Gradient", colors: ["#00F5FF", "#00C6FF", "#0072FF", "#6A00FF", "#B100FF"] },
            { name: "Warm Minimal", colors: ["#FAF3E0", "#FDE2E4", "#FAD2E1", "#CDB4DB", "#A2D2FF"] },
            { name: "Ocean Mist", colors: ["#E0F7FA", "#B2EBF2", "#80DEEA", "#4DD0E1", "#26C6DA"] },
            { name: "Urban Tech", colors: ["#0F172A", "#1E293B", "#334155", "#64748B", "#CBD5E1"] },
            { name: "Solar Flare", colors: ["#FF6A3D", "#FF8C42", "#FFC857", "#FCE762", "#C5D86D"] },
            { name: "Neon Gradient", colors: ["#FF00FF", "#FF6CAB", "#FFABAB", "#FFFB7D", "#B5FF7D"] },
            { name: "Serenity", colors: ["#ECFDF5", "#D1FAE5", "#A7F3D0", "#6EE7B7", "#34D399"] },
            { name: "Luxury Gold", colors: ["#1B1B1B", "#2C2C2C", "#4F4F4F", "#BFA181", "#E2C275"] },
            { name: "Future Neon", colors: ["#00FFD1", "#00F0FF", "#00B4FF", "#005DFF", "#1200FF"] },
            { name: "Calm Sky", colors: ["#F0F9FF", "#E0F2FE", "#BAE6FD", "#7DD3FC", "#38BDF8"] },
            { name: "Modern Pastel", colors: ["#FFF1F2", "#FFE4E6", "#FBCFE8", "#E9D5FF", "#DDD6FE"] },
            { name: "Earth Vibes", colors: ["#414A37", "#99744A", "#DBC2A6"] },
            { name: "Beary Yummy", colors: ["#50207A", "#FF48B9", "#12CE6A"] },
            { name: "Purple Nights", colors: ["#50207A", "#D6B9FC", "#838E5"] }
        ];

        /* ============================================
           POPULAR BUTTON PRESETS
           ============================================ */
        const buttonPresets = [
    {
        name: "3D Raised",
        html: '<button class="raised-btn">Click Me</button>',
        css: `
.raised-btn {
    background: linear-gradient(45deg, #667eea, #764ba2);
    border: none;
    color: white;
    padding: 15px 30px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 6px 0 #5a4b8c, 0 6px 10px rgba(0,0,0,0.3);
    transition: all 0.1s;
}
.raised-btn:hover {
    transform: translateY(2px);
    box-shadow: 0 4px 0 #5a4b8c, 0 4px 8px rgba(0,0,0,0.3);
}
.raised-btn:active {
    transform: translateY(6px);
    box-shadow: 0 0 0 #5a4b8c, 0 0 5px rgba(0,0,0,0.3);
}`
    },
    {
        name: "Aurora Gradient Shift",
        html: '<button class="aurora-btn">Click Me</button>',
        css: `
.aurora-btn {
    background: linear-gradient(270deg, #ff6ec4, #7873f5, #4ade80, #22d3ee);
    background-size: 600% 600%;
    border: none;
    color: white;
    padding: 12px 28px;
    border-radius: 30px;
    font-weight: 600;
    cursor: pointer;
    animation: auroraMove 6s ease infinite;
    transition: transform 0.3s;
}
.aurora-btn:hover {
    transform: scale(1.08);
}
@keyframes auroraMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}`
    },
    {
        name: "Border Pulse",
        html: '<button class="pulse-btn">Click Me</button>',
        css: `
.pulse-btn {
    background: transparent;
    border: 2px solid #667eea;
    color: #667eea;
    padding: 12px 28px;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}
.pulse-btn:after {
    content: '';
    position: absolute;
    inset: 0;
    border: 2px solid #667eea;
    border-radius: 12px;
    animation: pulseBorder 1.8s infinite;
}
@keyframes pulseBorder {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(1.4); opacity: 0; }
}`
    },
    {
        name: "Cyberpunk Glow",
        html: '<button class="cyber-btn">Click Me</button>',
        css: `
.cyber-btn {
    background: linear-gradient(45deg, #0f3460, #e94560);
    border: 1px solid #0f3460;
    color: #00ff41;
    padding: 12px 24px;
    border-radius: 0;
    font-weight: 600;
    font-family: 'Courier New', monospace;
    text-transform: uppercase;
    cursor: pointer;
    position: relative;
    transition: all 0.3s;
    box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
}
.cyber-btn:hover {
    box-shadow: 0 0 20px rgba(0, 255, 65, 0.6);
    transform: skew(-5deg);
    color: #ffffff;
}`
    },
    {
        name: "Futuristic Glow V2",
        html: '<button class="glow-btn-v2">Launch</button>',
        css: `
.glow-btn-v2 {
    background: #0f172a;
    color: #fff;
    padding: 14px 32px;
    border-radius: 12px;
    border: 2px solid transparent;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    z-index: 1;
    transition: all 0.3s ease;
}
.glow-btn-v2::before {
    content: "";
    position: absolute;
    inset: -3px;
    border-radius: inherit;
    background: linear-gradient(135deg, #a78bfa, #22d3ee, #34d399);
    filter: blur(10px);
    opacity: 0.6;
    z-index: -1;
    transition: all 0.3s ease;
}
.glow-btn-v2:hover::before {
    opacity: 1;
    filter: blur(16px);
}
.glow-btn-v2:hover {
    transform: translateY(-2px);
}`
    },
    {
        name: "Glassmorphism",
        html: '<button class="glass-btn">Click Me</button>',
        css: `
.glass-btn {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #333;
    padding: 12px 24px;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}
.glass-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}`
    },
    {
        name: "Glassmorphism V2",
        html: '<button class="glass-btn-v2">Get Started</button>',
        css: `
.glass-btn-v2 {
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.25);
    color: #fff;
    padding: 14px 32px;
    border-radius: 16px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: all 0.4s ease;
}
.glass-btn-v2:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.4);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}`
    },
    {
        name: "Gradient Border",
        html: '<button class="gradient-border-btn">Click Me</button>',
        css: `
.gradient-border-btn {
    background: white;
    background-clip: padding-box;
    border: 3px solid transparent;
    border-radius: 12px;
    padding: 12px 24px;
    font-weight: 600;
    color: #333;
    cursor: pointer;
    position: relative;
    transition: all 0.3s;
}
.gradient-border-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    padding: 3px;
    background: linear-gradient(45deg, #667eea, #764ba2);
    border-radius: inherit;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
}
.gradient-border-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
}`
    },
    {
        name: "Gradient Border V2",
        html: '<button class="gradient-border-v2">Sign Up</button>',
        css: `
.gradient-border-v2 {
    background: #0f172a;
    color: #fff;
    padding: 14px 32px;
    border-radius: 14px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    border: none;
}
.gradient-border-v2::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 2px;
    background: linear-gradient(135deg, #667eea, #764ba2, #ff6ec4);
    -webkit-mask: 
        linear-gradient(#fff 0 0) content-box, 
        linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
}
.gradient-border-v2:hover {
    background: linear-gradient(135deg, #667eea, #764ba2, #ff6ec4);
    color: #fff;
}`
    },
    {
        name: "Magnetic Hover",
        html: '<button class="magnetic-btn">Click Me</button>',
        css: `
.magnetic-btn {
    background: #667eea;
    border: none;
    color: white;
    padding: 12px 28px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s ease;
    position: relative;
}
.magnetic-btn:hover {
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
}`
    },
    {
        name: "Minimal Line V2",
        html: '<button class="line-btn-v2">Learn More</button>',
        css: `
.line-btn-v2 {
    background: transparent;
    border: 2px solid rgba(255,255,255,0.4);
    color: #fff;
    padding: 12px 30px;
    border-radius: 14px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
}
.line-btn-v2::after {
    content: "";
    position: absolute;
    width: 0%;
    height: 100%;
    top: 0;
    left: 0;
    background: linear-gradient(135deg, #22d3ee, #6366f1);
    border-radius: 12px;
    z-index: -1;
    transition: width 0.3s ease;
}
.line-btn-v2:hover {
    color: #fff;
    border-color: transparent;
}
.line-btn-v2:hover::after {
    width: 100%;
}`
    },
    {
        name: "Minimalist Line",
        html: '<button class="minimal-btn">Click Me</button>',
        css: `
.minimal-btn {
    background: transparent;
    border: none;
    border-bottom: 2px solid #333;
    color: #333;
    padding: 8px 16px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
}
.minimal-btn:after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 50%;
    width: 0;
    height: 2px;
    background: #667eea;
    transition: all 0.3s;
}
.minimal-btn:hover:after {
    width: 100%;
    left: 0;
}
.minimal-btn:hover {
    color: #667eea;
}`
    },
    {
        name: "Morphing",
        html: '<button class="morph-btn">Click Me</button>',
        css: `
.morph-btn {
    background: #667eea;
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    transform-origin: center;
}
.morph-btn:hover {
    border-radius: 8px;
    background: linear-gradient(45deg, #667eea, #764ba2);
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}`
    },
    {
        name: "Neon Glow",
        html: '<button class="neon-btn">Click Me</button>',
        css: `
.neon-btn {
    background: linear-gradient(45deg, #ff006e, #8338ec);
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 0 20px rgba(255, 0, 110, 0.5);
}
.neon-btn:hover {
    box-shadow: 0 0 30px rgba(255, 0, 110, 0.8);
    transform: translateY(-2px);
}`
    },
    {
        name: "Neumorphism",
        html: '<button class="neuro-btn">Click Me</button>',
        css: `
.neuro-btn {
    background: #e0e0e0;
    border: none;
    color: #333;
    padding: 15px 30px;
    border-radius: 15px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 8px 8px 16px #bebebe, -8px -8px 16px #ffffff;
    transition: all 0.3s;
}
.neuro-btn:hover {
    box-shadow: inset 8px 8px 16px #bebebe, inset -8px -8px 16px #ffffff;
}`
    },
    {
        name: "Neumorphism V2",
        html: '<button class="neumorph-v2">Dashboard</button>',
        css: `
.neumorph-v2 {
    background: #1e293b;
    border: none;
    color: #e2e8f0;
    padding: 14px 32px;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 6px 6px 16px #0f172a, -6px -6px 16px #334155;
    transition: all 0.3s ease;
}
.neumorph-v2:hover {
    box-shadow: inset 6px 6px 12px #0f172a, inset -6px -6px 12px #334155;
    transform: translateY(-2px);
}`
    },
    {
        name: "Ripple Effect",
        html: '<button class="ripple-btn">Click Me</button>',
        css: `
.ripple-btn {
    background: #667eea;
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: all 0.3s;
}
.ripple-btn:before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255,255,255,0.5);
    transition: width 0.6s, height 0.6s;
    transform: translate(-50%, -50%);
}
.ripple-btn:active:before {
    width: 300px;
    height: 300px;
}`
    },
    {
        name: "Rotating Border",
        html: '<button class="rotate-border-btn">Click Me</button>',
        css: `
.rotate-border-btn {
    background: #1a1a1a;
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}
.rotate-border-btn:before {
    content: '';
    position: absolute;
    inset: -2px;
    background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7, #fab1a0);
    border-radius: 10px;
    z-index: -1;
    animation: rotate 3s linear infinite;
}
@keyframes rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}`
    },
    {
        name: "Shimmer Sweep",
        html: '<button class="shimmer-btn">Click Me</button>',
        css: `
.shimmer-btn {
    background: linear-gradient(90deg, #667eea, #764ba2);
    border: none;
    color: white;
    padding: 12px 28px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}
.shimmer-btn:after {
    content: '';
    position: absolute;
    top: 0;
    left: -75%;
    width: 50%;
    height: 100%;
    background: linear-gradient(120deg, transparent, rgba(255,255,255,0.6), transparent);
    transform: skewX(-25deg);
}
.shimmer-btn:hover:after {
    animation: shimmerMove 1.2s forwards;
}
@keyframes shimmerMove {
    0% { left: -75%; }
    100% { left: 125%; }
}`
    },
    {
        name: "Shadow Lift",
        html: '<button class="shadow-btn">Click Me</button>',
        css: `
.shadow-btn {
    background: linear-gradient(135deg, #667eea, #764ba2);
    border: none;
    color: white;
    padding: 12px 24px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
.shadow-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}`
    },
    {
        name: "Shadow Lift V2",
        html: '<button class="shadow-btn-v2">Continue</button>',
        css: `
.shadow-btn-v2 {
    background: linear-gradient(145deg, #6366f1, #22d3ee);
    border: none;
    color: white;
    padding: 14px 32px;
    border-radius: 14px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(99,102,241,0.4);
    transition: all 0.3s ease;
}
.shadow-btn-v2:hover {
    transform: translateY(-4px) scale(1.03);
    box-shadow: 0 12px 32px rgba(99,102,241,0.6);
}`
    },
    {
        name: "Slide Fill",
        html: '<button class="slide-btn">Click Me</button>',
        css: `
.slide-btn {
    background: transparent;
    border: 2px solid #667eea;
    color: #667eea;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: color 0.3s;
}
.slide-btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: #667eea;
    transition: left 0.3s;
}
.slide-btn:hover:before {
    left: 0;
}
.slide-btn:hover {
    color: white;
}
.slide-btn span {
    position: relative;
    z-index: 1;
}`
    },
    {
        name: "Tilt Press",
        html: '<button class="tilt-btn">Click Me</button>',
        css: `
.tilt-btn {
    background: #764ba2;
    border: none;
    color: white;
    padding: 12px 28px;
    border-radius: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}
.tilt-btn:hover {
    transform: rotate(-2deg) translateY(-2px);
    box-shadow: 0 8px 18px rgba(118, 75, 162, 0.4);
}
.tilt-btn:active {
    transform: rotate(2deg) translateY(2px) scale(0.97);
}`
    },
    {
        name: "Vintage Retro",
        html: '<button class="retro-btn">Click Me</button>',
        css: `
.retro-btn {
    background: linear-gradient(45deg, #ff6b35, #f7931e);
    border: 3px solid #8b4513;
    color: #fff;
    padding: 12px 24px;
    border-radius: 0;
    font-weight: 700;
    font-family: serif;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    cursor: pointer;
    position: relative;
    transition: all 0.3s;
    box-shadow: 5px 5px 0 #8b4513;
}
.retro-btn:hover {
    transform: translate(2px, 2px);
    box-shadow: 3px 3px 0 #8b4513;
}`
    },
    {
        name: "Aurora Gradient Shift",
        html: '<button class="aurora-btn">Click Me</button>',
        css: `
.aurora-btn {
    background: linear-gradient(270deg, #ff6ec4, #7873f5, #4ade80, #22d3ee);
    background-size: 600% 600%;
    border: none;
    color: white;
    padding: 12px 28px;
    border-radius: 30px;
    font-weight: 600;
    cursor: pointer;
    animation: auroraMove 6s ease infinite;
    transition: transform 0.3s;
}
.aurora-btn:hover {
    transform: scale(1.08);
}
@keyframes auroraMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}`
    },
    {
        name: "Liquid Fill",
        html: '<button class="liquid-btn">Click Me</button>',
        css: `
.liquid-btn {
    background: transparent;
    border: 2px solid #667eea;
    color: #667eea;
    padding: 14px 30px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: color 0.4s, transform 0.3s;
}
.liquid-btn:before {
    content: '';
    position: absolute;
    bottom: -120%;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    transition: all 0.5s ease;
}
.liquid-btn:hover:before {
    bottom: -30%;
    border-radius: 0;
}
.liquid-btn:hover {
    color: white;
    transform: scale(1.05);
}`
    },
    {
        name: "Pulse Animation V2",
        html: '<button class="pulse-btn-v2">Click Me</button>',
        css: `
.pulse-btn-v2 {
    background: linear-gradient(45deg, #ff6b6b, #feca57);
    border: none;
    color: white;
    padding: 14px 30px;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    transition: transform 0.3s;
}
.pulse-btn-v2:hover {
    animation: pulseGrow 1.5s infinite;
}
@keyframes pulseGrow {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7); }
    50% { transform: scale(1.05); box-shadow: 0 0 20px 10px rgba(255, 107, 107, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 107, 0); }
}`
    },
    // New Trendy Button #1: Glass Neon Glow
    {
        name: "Glass Neon Glow",
        html: '<button class="glass-neon-btn">Click Me</button>',
        css: `
.glass-neon-btn {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.2);
    color: #fff;
    padding: 14px 32px;
    border-radius: 20px;
    font-weight: 600;
    cursor: pointer;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 20px rgba(102,126,234,0.4);
    position: relative;
    overflow: hidden;
    transition: all 0.3s;
}
.glass-neon-btn:hover {
    color: #fff;
    box-shadow: 0 0 40px rgba(102,126,234,0.8);
    transform: scale(1.05);
}`
    },
    // New Trendy Button #2: Gradient Shadow Lift
    {
        name: "Gradient Shadow Lift",
        html: '<button class="gradient-shadow-btn">Click Me</button>',
        css: `
.gradient-shadow-btn {
    background: linear-gradient(145deg, #22d3ee, #6366f1);
    border: none;
    color: white;
    padding: 14px 32px;
    border-radius: 14px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 6px 12px rgba(99,102,241,0.5);
    transition: all 0.3s ease;
}
.gradient-shadow-btn:hover {
    transform: translateY(-4px) scale(1.03);
    box-shadow: 0 12px 24px rgba(99,102,241,0.7);
}`
    },
    // New Trendy Button #3: Frosted Glass Swipe
    {
        name: "Frosted Glass Swipe",
        html: '<button class="frosted-swipe-btn">Click Me</button>',
        css: `
.frosted-swipe-btn {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 16px;
    color: #fff;
    padding: 14px 34px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(12px);
    transition: all 0.4s ease;
}
.frosted-swipe-btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -75%;
    width: 50%;
    height: 100%;
    background: rgba(255,255,255,0.2);
    transform: skewX(-20deg);
    transition: all 0.4s ease;
}
.frosted-swipe-btn:hover:before {
    left: 125%;
}
.frosted-swipe-btn:hover {
    transform: scale(1.05);
}`
    }
        ];

        /* ============================================
           STATE MANAGEMENT
           ============================================ */
        let selectedGradient = null;
        let customGradient = {
            type: 'linear',
            angle: 45,
            colors: ['#667eea', '#764ba2']
        };
        let currentFilter = 'all';
        let selectedButtonPreset = null;
        let currentAnimationType = 'none';
        let currentAnimationSpeed = 4;
        let currentAnimationDirection = 'normal';
        let currentConicBlend = 50;

        // Button style state
        let currentButtonStyle = {
            bgType: 'solid',
            bgColor: '#667eea',
            borderWidth: 0,
            borderColor: '#667eea',
            padding: 12,
            borderRadius: 8,
            fontSize: 14,
            fontWeight: 600,
            textColor: '#ffffff',
            shadowBlur: 0,
            shadowSpread: 0,
            hoverEffect: 'none'
        };

        /* ============================================
           INITIALIZATION & ERROR HANDLING
           ============================================ */
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('🚀 Initializing Gradient Studio Pro...');
                renderGradients();
                renderPalettes();
                renderButtonPresets();
                updateCustomGradient();
                updateColorWheel();
                initializeButtonControls();
                console.log('✅ Gradient Studio Pro initialized successfully');
            } catch (error) {
                console.error('❌ Initialization error:', error);
                showToast('Application initialization error', 'error');
            }
        });

        /* ============================================
           TAB NAVIGATION
           ============================================ */
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            const targetTab = document.getElementById(`${tabName}-tab`);
            if (targetTab) {
                targetTab.classList.add('active');
            }
        }

        /* ============================================
           GRADIENT FILTERING & RENDERING
           ============================================ */
        function filterGradients(category) {
            currentFilter = category;
            
            // Update filter tags
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderGradients();
        }

        function renderGradients() {
            const grid = document.getElementById('gradients-grid');
            if (!grid) return;
            
            grid.innerHTML = '';

            const gradientsToRender = currentFilter === 'all' 
                ? prebuiltGradients 
                : prebuiltGradients.filter(g => g.category === currentFilter);

            gradientsToRender.forEach((gradient, index) => {
                const card = document.createElement('div');
                card.className = 'gradient-card animate__animated animate__fadeIn';
                card.style.background = generateGradientCSS(gradient);
                card.style.animationDelay = `${index * 0.1}s`;
                
                // Make sure this click handler is properly set
                card.onclick = (e) => {
                    // Prevent copy button from triggering selection
                    if (e.target.classList.contains('copy-gradient-btn')) {
                        return;
                    }
                    selectGradient(gradient, card);
                };
                
                const name = document.createElement('div');
                name.className = 'gradient-name';
                name.textContent = gradient.name;
                
                const stats = document.createElement('div');
                stats.className = 'gradient-stats';
                stats.textContent = `${gradient.colors.length} colors`;
                
                const copyBtn = document.createElement('button');
                copyBtn.className = 'copy-gradient-btn';
                copyBtn.textContent = "📋";
                copyBtn.style.position = 'absolute'; // Make sure it's positioned properly
                copyBtn.style.zIndex = '20'; // Ensure it's on top

                copyBtn.onclick = (e) => {
                    console.log('Copy button clicked for:', gradient.name); // Debug line
                    e.stopPropagation();
                    e.preventDefault();
                    copyGradientCSS(gradient, copyBtn);
                    return false;
                };

                // Backup method with addEventListener
                copyBtn.addEventListener('click', (e) => {
                    console.log('Copy button clicked (addEventListener):', gradient.name);
                    e.stopPropagation();
                    e.preventDefault();
                    copyGradientCSS(gradient, copyBtn);
                }, true); // Use capture phase

                // Also add mousedown event as backup
                copyBtn.onmousedown = (e) => {
                    console.log('Copy button mousedown for:', gradient.name); // Debug line
                    e.stopPropagation();
                };
                
                card.appendChild(name);
                card.appendChild(stats);
                card.appendChild(copyBtn);
                grid.appendChild(card);
            });
        }

        function generateGradientCSS(gradient) {
            if (gradient.type === 'linear') {
                return `linear-gradient(${gradient.angle || 45}deg, ${gradient.colors.join(', ')})`;
            } else if (gradient.type === 'radial') {
                return `radial-gradient(circle, ${gradient.colors.join(', ')})`;
            } else if (gradient.type === 'conic') {
                return `conic-gradient(from ${gradient.angle || 0}deg, ${gradient.colors.join(', ')})`;
            }
            return `linear-gradient(45deg, ${gradient.colors.join(', ')})`;
        }

        function copyGradientCSS(gradient, targetElement = null) {
            const css = `/* ${gradient.name} */\nbackground: ${generateGradientCSS(gradient)};`;
            
            // Add fallback for older browsers
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(css).then(() => {
                    showToast(`Copied "${gradient.name}" CSS!`);
                    if (targetElement) {
                        createSparkles(targetElement);
                    }
                }).catch((err) => {
                    console.error('Copy failed:', err);
                    fallbackCopy(css);
                });
            } else {
                fallbackCopy(css);
            }
}

        function fallbackCopy(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                showToast('Copied to clipboard!');
            } catch (err) {
                showToast('Copy failed. Please try again.');
            }
            document.body.removeChild(textarea);
        }

        function selectGradient(gradient, cardElement) {
            console.log('Selecting gradient:', gradient.name); // Debug line
            
            // Remove previous selection
            document.querySelectorAll('.gradient-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection
            cardElement.classList.add('selected');
            selectedGradient = gradient;
            
            // Update import preview if on Build Your Own tab
            const importPreview = document.getElementById('import-preview');
            if (importPreview) {
                importPreview.style.background = generateGradientCSS(gradient);
                importPreview.textContent = `Selected: ${gradient.name}`;
            }
            
            // Add sparkles effect
            createSparkles(cardElement);
            showToast(`Selected "${gradient.name}"! ✨`);
}

        function shuffleGradients() {
            const shuffled = [...prebuiltGradients].sort(() => Math.random() - 0.5);
            prebuiltGradients.length = 0;
            prebuiltGradients.push(...shuffled);
            renderGradients();
            showToast('Gradients shuffled! 🎲');
        }

        /* ============================================
           CUSTOM GRADIENT BUILDER
           ============================================ */
        function updateCustomGradient() {
            const type = document.querySelector('input[name="gradient-type"]:checked')?.value || 'linear';
            const angleSlider = document.getElementById('angle-slider');
            const angleValue = document.getElementById('angle-value');
            const angleControl = document.getElementById('angle-control');
            const conicControls = document.getElementById('conic-controls');
            
            customGradient.type = type;
            
            // Show/hide controls based on type
            if (type === 'linear') {
                if (angleControl) angleControl.style.display = 'block';
                if (conicControls) conicControls.style.display = 'none';
                if (angleSlider && angleValue) {
                    customGradient.angle = angleSlider.value;
                    angleValue.textContent = `${angleSlider.value}°`;
                }
            } else if (type === 'conic') {
                if (angleControl) angleControl.style.display = 'block';
                if (conicControls) conicControls.style.display = 'block';
                if (angleSlider && angleValue) {
                    customGradient.angle = angleSlider.value;
                    angleValue.textContent = `${angleSlider.value}°`;
                }
            } else {
                if (angleControl) angleControl.style.display = 'none';
                if (conicControls) conicControls.style.display = 'none';
            }
            
            // Update colors from actual color inputs
            const colorInputs = document.querySelectorAll('#color-stops .color-input');
            customGradient.colors = Array.from(colorInputs).map(input => input.value);
            
            // Update preview
            const preview = document.getElementById('custom-preview');
            if (preview) {
                const gradientCSS = generateGradientCSS(customGradient);
                preview.style.background = gradientCSS;
            }
            
            // Update CSS preview
            updateGradientCSSPreview();
        }

        function updateGradientCSSPreview() {
            const cssPreview = document.getElementById('gradient-css-preview');
            if (!cssPreview) return;
            
            let css = `/* Custom Gradient CSS */
.custom-gradient {
    background: ${generateGradientCSS(customGradient)};`;

            // Add animation if applied
            const animationType = document.getElementById('animation-type')?.value;
            if (animationType && animationType !== 'none') {
                css += `
    background-size: 400% 400%;
    animation: animated-${animationType} ${currentAnimationSpeed}s ${currentAnimationDirection} infinite;`;
            }

            css += `
}

/* Usage */
<div class="custom-gradient">Your content here</div>`;

            // Add keyframes if animation is used
            if (animationType && animationType !== 'none') {
                css += `

/* Required keyframes for animation */
@keyframes animated-${animationType} {`;
                
                switch (animationType) {
                    case 'shift':
                        css += `
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }`;
                        break;
                    case 'wave':
                        css += `
    0%, 100% { background-position: 0% 50%; }
    25% { background-position: 100% 50%; }
    75% { background-position: 50% 100%; }`;
                        break;
                    case 'pulse':
                        css += `
    0%, 100% { background-size: 400% 400%; opacity: 1; }
    50% { background-size: 600% 600%; opacity: 0.8; }`;
                        break;
                    case 'rotate':
                        css += `
    0% { filter: hue-rotate(0deg); }
    100% { filter: hue-rotate(360deg); }`;
                        break;
                }
                css += `
}`;
            }

            cssPreview.textContent = css;
        }

        function applyAnimation() {
            const animationSelect = document.getElementById('animation-type');
            const preview = document.getElementById('custom-preview');
            const speedControl = document.getElementById('animation-speed-control');
            const directionControl = document.getElementById('animation-direction-control');
            
            if (!animationSelect || !preview) return;
            
            const animationType = animationSelect.value;
            
            // Remove all animation classes
            preview.classList.remove('animated-shift', 'animated-wave', 'animated-pulse', 'animated-rotate');
            
            // Show/hide animation controls
            if (animationType !== 'none') {
                preview.style.background = generateGradientCSS(customGradient);
                preview.classList.add(`animated-${animationType}`);
                
                if (speedControl) speedControl.style.display = 'block';
                if (directionControl) directionControl.style.display = 'block';
                
                showToast(`Applied ${animationType} animation`);
            } else {
                if (speedControl) speedControl.style.display = 'none';
                if (directionControl) directionControl.style.display = 'none';
                
                showToast('Animation removed');
            }
            
            currentAnimationType = animationType;
            updateGradientCSSPreview();
        }

        function updateAnimationSpeed() {
            const speedSlider = document.getElementById('animation-speed');
            const speedValue = document.getElementById('animation-speed-value');
            
            if (speedSlider && speedValue) {
                currentAnimationSpeed = parseInt(speedSlider.value);
                speedValue.textContent = `${currentAnimationSpeed}s`;
                applyAnimation();
                updateGradientCSSPreview();
            }
        }

        function updateAnimationDirection() {
            const directionSelect = document.getElementById('animation-direction');
            
            if (directionSelect) {
                currentAnimationDirection = directionSelect.value;
                applyAnimation();
                updateGradientCSSPreview();
            }
        }

        function updateConicBlend() {
            const blendSlider = document.getElementById('conic-blend');
            const blendValue = document.getElementById('conic-blend-value');
            
            if (blendSlider && blendValue) {
                currentConicBlend = parseInt(blendSlider.value);
                blendValue.textContent = `${currentConicBlend}%`;
                updateCustomGradient();
            }
        }

        function copyCustomGradient() {
            const css = `/* Custom Gradient */
            background: ${generateGradientCSS(customGradient)};`;
            
            navigator.clipboard.writeText(css).then(() => {
                showToast('Custom gradient CSS copied!');
                const copyButton = document.querySelector('.preview-copy-btn');
                if (copyButton) {
                    createSparkles(copyButton);
                }
            }).catch(() => {
                showToast('Copy failed. Try again!');
            });
        }

        function copyGradientCSSFromPreview() {
            const cssPreview = document.getElementById('gradient-css-preview');
            if (!cssPreview) return;
            
            const css = cssPreview.textContent;
            
            navigator.clipboard.writeText(css).then(() => {
                showToast('Gradient CSS copied from preview!');
                const copyButton = document.querySelector('.btn-success');
                if (copyButton) {
                    createSparkles(copyButton);
                }
            }).catch(() => {
                showToast('Copy failed. Try again!');
            });
        }

        function importSelectedGradient() {
            console.log('Import attempt - selectedGradient:', selectedGradient); // Debug line
            
            if (!selectedGradient) {
                showToast('Please select a gradient from Prebuilt Gradients first! Click on any gradient card to select it.');
                return;
            }

            console.log('Importing gradient:', selectedGradient.name); // Debug line

            // Update custom gradient with selected gradient
            customGradient = {
                type: selectedGradient.type,
                angle: selectedGradient.angle || 45,
                colors: [...selectedGradient.colors]
            };

            // Update UI controls
            const gradientTypeInput = document.querySelector(`input[name="gradient-type"][value="${selectedGradient.type}"]`);
            if (gradientTypeInput) {
                gradientTypeInput.checked = true;
            }
            
            if (selectedGradient.angle) {
                const angleSlider = document.getElementById('angle-slider');
                const angleValue = document.getElementById('angle-value');
                if (angleSlider) angleSlider.value = selectedGradient.angle;
                if (angleValue) angleValue.textContent = `${selectedGradient.angle}°`;
            }

            // Update color stops
            const colorStops = document.getElementById('color-stops');
            if (colorStops) {
                colorStops.innerHTML = '';

                selectedGradient.colors.forEach(color => {
                    const newStop = document.createElement('div');
                    newStop.className = 'color-stop';
                    newStop.innerHTML = `
                        <div class="color-input-wrapper">
                            <div class="color-preview" style="background: ${color}" onclick="this.nextElementSibling.click()"></div>
                            <input type="color" class="color-input" value="${color}" onchange="updateColorStop(this)">
                            <input type="text" class="color-hex" value="${color}" onchange="updateColorStopHex(this)" placeholder="Enter hex code">
                        </div>
                        ${selectedGradient.colors.length > 2 ? '<button class="remove-stop" onclick="removeColorStop(this)">×</button>' : ''}
                    `;
                    colorStops.appendChild(newStop);
                });
            }

            // Update preview
            updateCustomGradient();
            
            // Update import preview
            const importPreview = document.getElementById('import-preview');
            if (importPreview) {
                importPreview.style.background = generateGradientCSS(selectedGradient);
                importPreview.textContent = `Imported: ${selectedGradient.name}`;
            }

            showToast(`Imported "${selectedGradient.name}" successfully! 🔥`);
}

        /* ============================================
           COLOR WHEEL & COLOR STOP FUNCTIONS
           ============================================ */
        function updateColorWheel() {
            const colorWheel = document.getElementById('color-wheel');
            const hexCode = document.getElementById('hex-code');
            const rgbCode = document.getElementById('rgb-code');
            
            if (!colorWheel) return;
            
            const hex = colorWheel.value;
            const rgb = hexToRgb(hex);
            
            if (hexCode) {
                hexCode.textContent = `HEX: ${hex.toUpperCase()}`;
            }
            
            if (rgbCode && rgb) {
                rgbCode.textContent = `RGB: rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
            }
        }

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function addColorStop() {
            const colorStops = document.getElementById('color-stops');
            if (!colorStops) return;
            
            if (colorStops.children.length >= 6) {
                showToast('Maximum 6 color stops allowed!');
                return;
            }
            
            const newStop = document.createElement('div');
            newStop.className = 'color-stop';
            const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
            
            newStop.innerHTML = `
                <div class="color-input-wrapper">
                    <div class="color-preview" style="background: ${randomColor}" onclick="this.nextElementSibling.click()"></div>
                    <input type="color" class="color-input" value="${randomColor}" onchange="updateColorStop(this)">
                    <input type="text" class="color-hex" value="${randomColor}" onchange="updateColorStopHex(this)" placeholder="Enter hex code">
                </div>
                <button class="remove-stop" onclick="removeColorStop(this)">×</button>
            `;
            
            colorStops.appendChild(newStop);
            updateCustomGradient();
        }

        function removeColorStop(button) {
            if (!button) return;
            
            const colorStops = document.getElementById('color-stops');
            if (!colorStops) return;
            
            if (colorStops.children.length <= 2) {
                showToast('Minimum 2 color stops required');
                return;
            }
            
            const colorStop = button.parentElement;
            if (colorStop) {
                colorStop.remove();
                updateCustomGradient();
            }
        }

        function updateColorStop(input) {
            if (!input) return;
            
            const preview = input.previousElementSibling;
            const hexInput = input.nextElementSibling;
            
            if (preview) preview.style.background = input.value;
            if (hexInput) hexInput.value = input.value;
            
            updateCustomGradient();
        }

        function updateColorStopHex(input) {
            if (!input) return;
            
            const colorInput = input.previousElementSibling;
            const preview = colorInput ? colorInput.previousElementSibling : null;
            
            if (/^#[0-9A-F]{6}$/i.test(input.value)) {
                if (colorInput) colorInput.value = input.value;
                if (preview) preview.style.background = input.value;
                updateCustomGradient();
            }
        }

        function addColorFromWheel() {
            const colorWheel = document.getElementById('color-wheel');
            if (!colorWheel) return;
            
            const color = colorWheel.value;
            const colorStops = document.getElementById('color-stops');
            
            if (!colorStops) return;
            
            if (colorStops.children.length >= 6) {
                showToast('Maximum 6 color stops allowed');
                return;
            }
            
            const newStop = document.createElement('div');
            newStop.className = 'color-stop';
            
            newStop.innerHTML = `
                <div class="color-input-wrapper">
                    <div class="color-preview" style="background: ${color}" onclick="this.nextElementSibling.click()"></div>
                    <input type="color" class="color-input" value="${color}" onchange="updateColorStop(this)">
                    <input type="text" class="color-hex" value="${color}" onchange="updateColorStopHex(this)" placeholder="Enter hex code">
                </div>
                <button class="remove-stop" onclick="removeColorStop(this)">×</button>
            `;
            
            colorStops.appendChild(newStop);
            updateCustomGradient();
            showToast(`Added ${color} to gradient`);
        }

        /* ============================================
           PALETTE RENDERING & FUNCTIONALITY
           ============================================ */
        function renderPalettes() {
            const grid = document.getElementById('palettes-grid');
            if (!grid) return;
            
            grid.innerHTML = '';

            colorPalettes.forEach((palette, index) => {
                const card = document.createElement('div');
                card.className = 'palette-card animate__animated animate__fadeInUp';
                card.style.animationDelay = `${index * 0.05}s`;
                
                const name = document.createElement('div');
                name.className = 'palette-name';
                name.textContent = palette.name;
                
                const colors = document.createElement('div');
                colors.className = 'palette-colors';
                
                palette.colors.forEach(color => {
                    const colorDiv = document.createElement('div');
                    colorDiv.className = 'palette-color';
                    colorDiv.style.background = color;
                    colorDiv.onclick = () => copyColor(color);
                    
                    const code = document.createElement('div');
                    code.className = 'palette-color-code';
                    code.textContent = color;
                    
                    colorDiv.appendChild(code);
                    colors.appendChild(colorDiv);
                });
                
                card.appendChild(name);
                card.appendChild(colors);
                grid.appendChild(card);
            });
        }

        function copyColor(color) {
            navigator.clipboard.writeText(color).then(() => {
                showToast(`Copied ${color} to clipboard!`);
                const colorElements = document.querySelectorAll('.palette-color');
                colorElements.forEach(element => {
                    if (element.style.background === color) {
                        createSparkles(element);
                    }
                });
            }).catch(() => {
                showToast('Copy failed. Try again!');
            });
        }

        function shufflePalettes() {
            const shuffled = [...colorPalettes].sort(() => Math.random() - 0.5);
            colorPalettes.length = 0;
            colorPalettes.push(...shuffled);
            renderPalettes();
            showToast('Palettes shuffled! 🎲');
        }

        /* ============================================
           BUTTON BUILDER FUNCTIONALITY
           ============================================ */
        function renderButtonPresets() {
            const grid = document.getElementById('preset-buttons-grid');
            if (!grid) return;
            
            grid.innerHTML = '';

            buttonPresets.forEach(function(preset, index) {
                const card = document.createElement('div');
                card.className = 'preset-button-card animate__animated animate__fadeInUp';
                card.style.animationDelay = `${index * 0.05}s`;
                card.onclick = function() { 
                    selectButtonPreset(preset, card); 
                };
                
                const title = document.createElement('h4');
                title.textContent = preset.name;
                title.style.marginBottom = '15px';
                title.style.color = 'var(--text-primary)';
                
                // Create a preview of the button
                const preview = document.createElement('div');
                preview.innerHTML = preset.html;
                preview.style.marginBottom = '10px';
                
                // Apply the CSS styles inline for preview
                const style = document.createElement('style');
                style.textContent = preset.css;
                card.appendChild(style);
                
                card.appendChild(title);
                card.appendChild(preview);
                grid.appendChild(card);
            });
        }

        function selectButtonPreset(preset, cardElement) {
            // Remove previous selection
            document.querySelectorAll('.preset-button-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Add selection
            cardElement.classList.add('selected');
            selectedButtonPreset = preset;
            
            // Get preview button and CSS preview
            const previewButton = document.getElementById('preview-button');
            const cssPreview = document.getElementById('css-preview');
            
            if (!previewButton || !cssPreview) return;

            // Remove any existing preset styles
            const existingStyles = document.querySelectorAll('#preset-style');
            existingStyles.forEach(style => style.remove());

            // Extract class name from preset HTML
            const classMatch = preset.html.match(/class="([^"]+)"/);
            const originalClassName = classMatch ? classMatch[1] : 'preset-btn';

            // Create new style element for the preview
            const style = document.createElement('style');
            style.id = 'preset-style';
            
            // Apply styles directly to the preview button ID
            let modifiedCSS = preset.css.replace(new RegExp(`\\.${originalClassName}`, 'g'), '#preview-button');
            style.textContent = modifiedCSS;
            document.head.appendChild(style);

            // Clear inline styles and classes so preset CSS takes effect
            previewButton.style.cssText = '';
            previewButton.className = '';
            
            // Update button text
            const buttonText = document.getElementById('button-text')?.value || 'Sample Button';
            previewButton.textContent = buttonText;

            // Update the CSS preview
            cssPreview.textContent = `/* ${preset.name} Preset */\n${preset.css}\n\n/* HTML Usage */\n${preset.html}`;

            showToast(`Selected "${preset.name}" preset!`);
        }

        function initializeButtonControls() {
            // Set up event listeners for all button controls
            const controls = [
                'bg-type', 'bg-color', 'border-width', 'border-color', 
                'padding', 'border-radius', 'font-size', 'font-weight', 
                'text-color', 'shadow-blur', 'shadow-spread', 'hover-effect'
            ];

            controls.forEach(controlId => {
                const element = document.getElementById(controlId);
                if (element) {
                    element.addEventListener('input', updateButtonStyle);
                    element.addEventListener('change', updateButtonStyle);
                }
            });

            // Initialize button style and CSS preview
            updateButtonStyle();
        }

        function updateButtonStyle() {
            const previewButton = document.getElementById('preview-button');
            const cssPreview = document.getElementById('css-preview');

            if (!previewButton || !cssPreview) return;

            // Get all current values
            currentButtonStyle.bgType = document.getElementById('bg-type')?.value || 'solid';
            currentButtonStyle.bgColor = document.getElementById('bg-color')?.value || '#667eea';
            currentButtonStyle.borderWidth = parseInt(document.getElementById('border-width')?.value || 0);
            currentButtonStyle.borderColor = document.getElementById('border-color')?.value || '#667eea';
            currentButtonStyle.padding = parseInt(document.getElementById('padding')?.value || 12);
            currentButtonStyle.borderRadius = parseInt(document.getElementById('border-radius')?.value || 8);
            currentButtonStyle.fontSize = parseInt(document.getElementById('font-size')?.value || 14);
            currentButtonStyle.fontWeight = document.getElementById('font-weight')?.value || 600;
            currentButtonStyle.textColor = document.getElementById('text-color')?.value || '#ffffff';
            currentButtonStyle.shadowBlur = parseInt(document.getElementById('shadow-blur')?.value || 0);
            currentButtonStyle.shadowSpread = parseInt(document.getElementById('shadow-spread')?.value || 0);
            currentButtonStyle.hoverEffect = document.getElementById('hover-effect')?.value || 'none';

            // Update slider values display
            updateSliderDisplays();

            // Apply styles to preview button
            let buttonStyle = '';
            
            // Background
            if (currentButtonStyle.bgType === 'solid') {
                buttonStyle += `background: ${currentButtonStyle.bgColor}; `;
            } else if (currentButtonStyle.bgType === 'transparent') {
                buttonStyle += `background: transparent; `;
            } else if (currentButtonStyle.bgType === 'gradient') {
                buttonStyle += `background: linear-gradient(45deg, ${currentButtonStyle.bgColor}, #764ba2); `;
            }

            // Other styles
            buttonStyle += `border: ${currentButtonStyle.borderWidth}px solid ${currentButtonStyle.borderColor}; `;
            buttonStyle += `padding: ${currentButtonStyle.padding}px ${currentButtonStyle.padding * 2}px; `;
            buttonStyle += `border-radius: ${currentButtonStyle.borderRadius}px; `;
            buttonStyle += `font-size: ${currentButtonStyle.fontSize}px; `;
            buttonStyle += `font-weight: ${currentButtonStyle.fontWeight}; `;
            buttonStyle += `color: ${currentButtonStyle.textColor}; `;
            buttonStyle += `cursor: pointer; `;
            buttonStyle += `transition: all 0.3s ease; `;

            // Shadow
            if (currentButtonStyle.shadowBlur > 0 || currentButtonStyle.shadowSpread > 0) {
                buttonStyle += `box-shadow: 0 4px ${currentButtonStyle.shadowBlur}px ${currentButtonStyle.shadowSpread}px rgba(0,0,0,0.2); `;
            }

            previewButton.style.cssText = buttonStyle;

            // Update hover effects
            updateHoverEffect();

            // Update CSS preview
            updateCSSPreview();
        }

        function updateSliderDisplays() {
            const sliders = {
                'border-width': 'px',
                'padding': 'px',
                'border-radius': 'px',
                'font-size': 'px',
                'shadow-blur': 'px',
                'shadow-spread': 'px'
            };

            Object.entries(sliders).forEach(([sliderId, unit]) => {
                const slider = document.getElementById(sliderId);
                const valueDisplay = document.getElementById(`${sliderId}-value`);
                if (slider && valueDisplay) {
                    valueDisplay.textContent = `${slider.value}${unit}`;
                }
            });
        }

        function updateHoverEffect() {
            // Remove existing hover style
            let existingHoverStyle = document.getElementById('button-hover-style');
            if (existingHoverStyle) {
                existingHoverStyle.remove();
            }

            if (currentButtonStyle.hoverEffect !== 'none') {
                const style = document.createElement('style');
                style.id = 'button-hover-style';
                
                let hoverCSS = '#preview-button:hover { ';
                
                switch (currentButtonStyle.hoverEffect) {
                    case 'lift':
                        hoverCSS += 'transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.3); ';
                        break;
                    case 'glow':
                        hoverCSS += `box-shadow: 0 0 20px 5px ${currentButtonStyle.bgColor}50; `;
                        break;
                    case 'scale':
                        hoverCSS += 'transform: scale(1.05); ';
                        break;
                    case 'darken':
                        hoverCSS += 'filter: brightness(0.8); ';
                        break;
                    case 'lighten':
                        hoverCSS += 'filter: brightness(1.2); ';
                        break;
                    case 'rotate':
                        hoverCSS += 'transform: rotate(2deg); ';
                        break;
                    case 'skew':
                        hoverCSS += 'transform: skew(-2deg); ';
                        break;
                }
                
                hoverCSS += '} ';
                style.textContent = hoverCSS;
                document.head.appendChild(style);
            }
        }

        function updateCSSPreview() {
            const cssPreview = document.getElementById('css-preview');
            const buttonText = document.getElementById('button-text')?.value || 'Sample Button';
            
            if (!cssPreview) return;
            
            let css = `/* Custom Button CSS */
.custom-button {
    `;

            // Background
            if (currentButtonStyle.bgType === 'solid') {
                css += `background: ${currentButtonStyle.bgColor};\n    `;
            } else if (currentButtonStyle.bgType === 'gradient') {
                css += `background: linear-gradient(45deg, ${currentButtonStyle.bgColor}, #764ba2);\n    `;
            } else {
                css += `background: transparent;\n    `;
            }

            // Other properties
            css += `border: ${currentButtonStyle.borderWidth}px solid ${currentButtonStyle.borderColor};\n    `;
            css += `color: ${currentButtonStyle.textColor};\n    `;
            css += `padding: ${currentButtonStyle.padding}px ${currentButtonStyle.padding * 2}px;\n    `;
            css += `border-radius: ${currentButtonStyle.borderRadius}px;\n    `;
            css += `font-size: ${currentButtonStyle.fontSize}px;\n    `;
            css += `font-weight: ${currentButtonStyle.fontWeight};\n    `;
            css += `cursor: pointer;\n    `;
            css += `transition: all 0.3s ease;\n    `;

            // Shadow
            if (currentButtonStyle.shadowBlur > 0 || currentButtonStyle.shadowSpread > 0) {
                css += `box-shadow: 0 4px ${currentButtonStyle.shadowBlur}px ${currentButtonStyle.shadowSpread}px rgba(0,0,0,0.2);\n    `;
            }

            css += `}

.custom-button:hover {
    `;

            // Hover effects
            switch (currentButtonStyle.hoverEffect) {
                case 'lift':
                    css += `transform: translateY(-3px);\n    box-shadow: 0 8px 25px rgba(0,0,0,0.3);\n    `;
                    break;
                case 'glow':
                    css += `box-shadow: 0 0 20px 5px ${currentButtonStyle.bgColor}50;\n    `;
                    break;
                case 'scale':
                    css += `transform: scale(1.05);\n    `;
                    break;
                case 'darken':
                    css += `filter: brightness(0.8);\n    `;
                    break;
                case 'lighten':
                    css += `filter: brightness(1.2);\n    `;
                    break;
                case 'rotate':
                    css += `transform: rotate(2deg);\n    `;
                    break;
                case 'skew':
                    css += `transform: skew(-2deg);\n    `;
                    break;
                case 'none':
                    css += `/* No hover effect */\n    `;
                    break;
            }

            css += `}

/* HTML Usage */
<button class="custom-button">${buttonText}</button>`;

            cssPreview.textContent = css;
        }

        function updateButtonText() {
            const text = document.getElementById('button-text')?.value || 'Sample Button';
            const previewButton = document.getElementById('preview-button');
            if (previewButton) {
                previewButton.textContent = text;
            }
            updateCSSPreview(); // Update CSS preview with new text
        }

        function copyButtonCSS() {
            const cssPreview = document.getElementById('css-preview');
            if (!cssPreview) return;
            
            const css = cssPreview.textContent;
            
            navigator.clipboard.writeText(css).then(() => {
                showToast('Button CSS copied!');
                const copyButton = document.querySelector('.btn-success');
                if (copyButton) {
                    createSparkles(copyButton);
                }
            }).catch(() => {
                showToast('Copy failed. Try again!');
            });
        }

        function copyButtonCSSFromPreview() {
            const cssPreview = document.getElementById('css-preview');
            const css = cssPreview.textContent;
            
            navigator.clipboard.writeText(css).then(() => {
                showToast('CSS copied from preview! 📋');
                const copyButton = document.querySelector('.btn-success');
                if (copyButton) {
                    createSparkles(copyButton);
                }
            }).catch(() => {
                showToast('Copy failed. Try again! ❌');
            });
        }

        function resetButton() {
            // Reset form values
            const controls = {
                'button-text': 'Sample Button',
                'bg-type': 'solid',
                'bg-color': '#667eea',
                'border-width': '0',
                'border-color': '#667eea',
                'padding': '12',
                'border-radius': '8',
                'font-size': '14',
                'font-weight': '600',
                'text-color': '#ffffff',
                'shadow-blur': '0',
                'shadow-spread': '0',
                'hover-effect': 'none'
            };

            Object.entries(controls).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) element.value = value;
            });
            
            // Reset button style object
            currentButtonStyle = {
                bgType: 'solid',
                bgColor: '#667eea',
                borderWidth: 0,
                borderColor: '#667eea',
                padding: 12,
                borderRadius: 8,
                fontSize: 14,
                fontWeight: 600,
                textColor: '#ffffff',
                shadowBlur: 0,
                shadowSpread: 0,
                hoverEffect: 'none'
            };
            
            const previewButton = document.getElementById('preview-button');
            if (previewButton) {
                previewButton.className = 'btn btn-primary';
                previewButton.textContent = 'Sample Button';
                previewButton.style.cssText = '';
            }
            
            // Remove custom styles
            const customStyles = document.querySelectorAll('#preset-style, #button-hover-style');
            customStyles.forEach(style => style.remove());
            
            selectedButtonPreset = null;
            document.querySelectorAll('.preset-button-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Update displays
            updateButtonStyle();
            showToast('Button reset');
        }

        function applySelectedGradient() {
            if (!selectedGradient) {
                showToast('Please select a gradient first from the Prebuilt Gradients tab');
                return;
            }
            
            const previewButton = document.getElementById('preview-button');
            if (previewButton) {
                const gradientCSS = generateGradientCSS(selectedGradient);
                
                previewButton.style.background = gradientCSS;
                previewButton.style.border = 'none';
                previewButton.style.color = 'white';
                
                // Update bg type to gradient
                const bgTypeSelect = document.getElementById('bg-type');
                if (bgTypeSelect) bgTypeSelect.value = 'gradient';
                currentButtonStyle.bgType = 'gradient';
                
                updateCSSPreview();
                showToast(`Applied "${selectedGradient.name}" gradient to button`);
            }
        }

        function applyCustomGradient() {
            const previewButton = document.getElementById('preview-button');
            if (previewButton) {
                const gradientCSS = generateGradientCSS(customGradient);
                
                previewButton.style.background = gradientCSS;
                previewButton.style.border = 'none';
                previewButton.style.color = 'white';
                
                // Update bg type to gradient
                const bgTypeSelect = document.getElementById('bg-type');
                if (bgTypeSelect) bgTypeSelect.value = 'gradient';
                currentButtonStyle.bgType = 'gradient';
                
                updateCSSPreview();
                showToast('Applied custom gradient to button');
            }
        }

        function importButtonCode() {
            const code = document.getElementById('import-code')?.value;
            if (!code || !code.trim()) return;
            
            try {
                // Extract HTML and CSS from the imported code
                const htmlMatch = code.match(/<button[^>]*>(.*?)<\/button>/i);
                const cssMatch = code.match(/\.[\s\S]*?{[\s\S]*?}/g);
                
                if (htmlMatch) {
                    const buttonText = htmlMatch[1];
                    const buttonTextInput = document.getElementById('button-text');
                    if (buttonTextInput) {
                        buttonTextInput.value = buttonText;
                        updateButtonText();
                    }
                }
                
                if (cssMatch) {
                    // Apply imported CSS
                    let existingStyle = document.getElementById('imported-button-style');
                    if (existingStyle) {
                        existingStyle.remove();
                    }
                    
                    const style = document.createElement('style');
                    style.id = 'imported-button-style';
                    style.textContent = cssMatch.join('\n').replace(/\.[^{]+/g, '#preview-button');
                    document.head.appendChild(style);
                    
                    showToast('Button code imported');
                } else {
                    showToast('No valid CSS found in imported code');
                }
            } catch (error) {
                showToast('Error importing button code');
            }
        }

        /* ============================================
           UTILITY FUNCTIONS
           ============================================ */
        function resetAll() {
            // Reset gradients
            selectedGradient = null;
            customGradient = {
                type: 'linear',
                angle: 45,
                colors: ['#667eea', '#764ba2']
            };
            
            // Reset selections
            document.querySelectorAll('.gradient-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Reset custom gradient controls
            const linearRadio = document.querySelector('input[value="linear"]');
            if (linearRadio) linearRadio.checked = true;
            
            const angleSlider = document.getElementById('angle-slider');
            const angleValue = document.getElementById('angle-value');
            const animationType = document.getElementById('animation-type');
            const animationSpeed = document.getElementById('animation-speed');
            const animationDirection = document.getElementById('animation-direction');
            
            if (angleSlider) angleSlider.value = 45;
            if (angleValue) angleValue.textContent = '45°';
            if (animationType) animationType.value = 'none';
            if (animationSpeed) animationSpeed.value = 4;
            if (animationDirection) animationDirection.value = 'normal';
            
            // Reset color stops
            const colorStops = document.getElementById('color-stops');
            if (colorStops) {
                colorStops.innerHTML = `
                    <div class="color-stop">
                        <div class="color-input-wrapper">
                            <div class="color-preview" style="background: #667eea" onclick="this.nextElementSibling.click()"></div>
                            <input type="color" class="color-input" value="#667eea" onchange="updateColorStop(this)">
                            <input type="text" class="color-hex" value="#667eea" onchange="updateColorStopHex(this)" placeholder="Enter hex code">
                        </div>
                    </div>
                    <div class="color-stop">
                        <div class="color-input-wrapper">
                            <div class="color-preview" style="background: #764ba2" onclick="this.nextElementSibling.click()"></div>
                            <input type="color" class="color-input" value="#764ba2" onchange="updateColorStop(this)">
                            <input type="text" class="color-hex" value="#764ba2" onchange="updateColorStopHex(this)" placeholder="Enter hex code">
                        </div>
                    </div>
                `;
            }
            
            // Reset filter
            currentFilter = 'all';
            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.classList.remove('active');
            });
            const firstFilterTag = document.querySelector('.filter-tag');
            if (firstFilterTag) firstFilterTag.classList.add('active');
            
            // Reset button builder
            resetButton();
            
            // Reset color wheel
            const colorWheel = document.getElementById('color-wheel');
            if (colorWheel) {
                colorWheel.value = '#667eea';
                updateColorWheel();
            }
            
            // Reset animation values
            currentAnimationSpeed = 4;
            currentAnimationDirection = 'normal';
            currentAnimationType = 'none';
            
            updateCustomGradient();
            renderGradients();
            
            // Hide animation controls
            const speedControl = document.getElementById('animation-speed-control');
            const directionControl = document.getElementById('animation-direction-control');
            if (speedControl) speedControl.style.display = 'none';
            if (directionControl) directionControl.style.display = 'none';
            
            showToast('All settings reset');
        }

        function createSparkles(element) {
            if (!element) return;
            
            // Create sparkle effect
            for (let i = 0; i < 6; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 0.5 + 's';
                
                element.style.position = 'relative';
                element.appendChild(sparkle);
                
                // Remove sparkle after animation
                setTimeout(() => {
                    if (sparkle.parentNode) {
                        sparkle.parentNode.removeChild(sparkle);
                    }
                }, 1500);
            }
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            if (!toast || !toastMessage) return;
            
            toastMessage.textContent = message;
            
            // Change toast style based on type
            if (type === 'error') {
                toast.style.background = 'linear-gradient(135deg, var(--danger), #dc2626)';
            } else {
                toast.style.background = 'linear-gradient(135deg, var(--success), #059669)';
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function createSparkles(element) {
            if (!element) return;
            
            for (let i = 0; i < 6; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = Math.random() * 100 + '%';
                    sparkle.style.top = Math.random() * 100 + '%';
                    
                    if (element.offsetParent) {
                        element.offsetParent.appendChild(sparkle);
                        
                        setTimeout(() => {
                            if (sparkle.parentNode) {
                                sparkle.parentNode.removeChild(sparkle);
                            }
                        }, 1500);
                    }
                }, i * 100);
            }
        }

        // Global error handler
        window.addEventListener('error', (e) => {
            console.error('Application error:', e.error);
            showToast('An error occurred. Please try again', 'error');
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl+R to reset (prevent page refresh)
            if (e.ctrlKey && e.key === 'r') {
                e.preventDefault();
                resetAll();
            }
            
            // Ctrl+C to copy when gradient is selected
            if (e.ctrlKey && e.key === 'c' && selectedGradient) {
                e.preventDefault();
                copyGradientCSS(selectedGradient);
            }
        });
    </script>
</body>
</html>
